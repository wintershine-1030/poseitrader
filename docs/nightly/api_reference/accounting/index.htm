<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-nightly docs-doc-page docs-doc-id-api_reference/accounting" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Accounting | PoseiTrader Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="docs/latestimg/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="docs/latestimg/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="docs/latestnightly/api_reference/accounting"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="Open-source trading platform, Algorithmic trading software, Event-driven backtesting, Live trading with no code changes, Trade any asset class, Low-latency trading execution, Python API for trading strategies, Custom market data integration, Futures and options trading, Crypto spot and derivatives trading, Equities trading simulation, FX spot trading, Sports betting markets trading, Fast backtesting strategies, Advanced trading orders, Rust-based trading platform, High-performance trading system, Nanosecond resolution market simulation, Trading across multiple venues, Trading platform for hedge funds, Seamless data integration, Customizable trading strategies, AI and ML trading strategies, Posei trading platform, Multi-venue trading, Unlimited backtesting strategies, Fast trading execution solutions, Realistic market simulations, Seamless trading API integration, PoseiTrader Documentation, Docs, PoseiTrader Docs"><meta data-rh="true" name="title" content="PoseiTrader Documentation"><meta data-rh="true" name="og:title" content="PoseiTrader Documentation"><meta data-rh="true" name="og:description" content="PoseiTrader is a high-performance platform for automating trading strategies, built on the powerful Posei framework for backtesting and real-time trading."><meta data-rh="true" name="og:image" content="img/preview.png"><meta data-rh="true" name="og:url" content="/docs/latest"><meta data-rh="true" name="docusaurus_version" content="nightly"><meta data-rh="true" name="docusaurus_tag" content="docs-default-nightly"><meta data-rh="true" name="docsearch:version" content="nightly"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-nightly"><meta data-rh="true" property="og:title" content="Accounting | PoseiTrader Documentation"><meta data-rh="true" name="description" content="The accounting subpackage defines both different account types and account management"><meta data-rh="true" property="og:description" content="The accounting subpackage defines both different account types and account management"><link data-rh="true" rel="icon" href="../../../img/shell.ico"><link data-rh="true" rel="canonical" href="index.htm"><link data-rh="true" rel="alternate" href="index.htm" hreflang="en"><link data-rh="true" rel="alternate" href="index.htm" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://CWRKEEL01M-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Python API","item":"docs/latestnightly/api_reference/"},{"@type":"ListItem","position":2,"name":"Accounting","item":"docs/latestnightly/api_reference/accounting"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="PoseiTrader Documentation" href="../../../opensearch.xml">
<script>!function(){var t=window.location.pathname;if(t.startsWith("/docs")&&!t.startsWith("/docs/latest")&&!t.startsWith("/docs/nightly")){var s=t.replace("/docs","/docs/latest");window.location.href=s}}()</script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TR4XK597XK"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TR4XK597XK",{anonymize_ip:!0})</script><link rel="stylesheet" href="../../../assets/css/styles.0f0f692e.css">
<script src="../../../assets/js/runtime~main.92b727d5.js" defer="defer"></script>
<script src="../../../assets/js/main.1cd42d85.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewbox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewbox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="../../../../index.htm" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="../../../img/nt-black-large.webp" alt="PoseiTrader Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="../../../img/nt-white-large.webp" alt="PoseiTrader Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Version</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="../../../latest/index.html">latest</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="../../index.htm">nightly</a></li></ul></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewbox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/poseisysstems" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link common-social" aria-label="GitHub repository"></a> <a href="https://twitter.com/PoseiTrader" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-x-link common-social" aria-label="X"></a><div class="toggleContainer_T22x colorModeToggle_DEke"><button class="clean-btn toggleButton_yw5v toggleButtonDisabled_BJd7" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><div class="switch_Ms1n"><span class="iconWrapper_FHql"><style data-emotion="css lp52so">.css-lp52so{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;color:black;font-size:14px;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium lightToggleIcon_SFTY css-lp52so" focusable="false" aria-hidden="true" viewbox="0 0 24 24" data-testid="LightModeIcon"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"></path></svg><style data-emotion="css 13m6tje">.css-13m6tje{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;color:white;font-size:14px;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium darkToggleIcon_ekgs css-13m6tje" focusable="false" aria-hidden="true" viewbox="0 0 24 24" data-testid="DarkModeIcon"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"></path></svg></span></div></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a href="../../../../index.htm" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_isFc"><img src="../../../img/nt-black-large.webp" alt="PoseiTrader Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="../../../img/nt-white-large.webp" alt="PoseiTrader Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b></b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../../index.htm">PoseiTrader Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../../getting_started/index.htm">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../../concepts/index.htm">Concepts</a><button aria-label="Expand sidebar category &#x27;Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../../tutorials/index.htm">Tutorials</a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../../integrations/index.htm">Integrations</a><button aria-label="Expand sidebar category &#x27;Integrations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="../index.htm">Python API</a><button aria-label="Collapse sidebar category &#x27;Python API&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="index.htm">Accounting</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="../adapters/index.htm">Adapters</a><button aria-label="Expand sidebar category &#x27;Adapters&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../analysis/index.htm">Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../backtest/index.htm">Backtest</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../cache/index.htm">Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../common/index.htm">Common</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../config/index.htm">Config</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../core/index.htm">Core</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../data/index.htm">Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../execution/index.htm">Execution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../indicators/index.htm">Indicators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../live/index.htm">Live</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="../model/index.htm">Model</a><button aria-label="Expand sidebar category &#x27;Model&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../persistence/index.htm">Persistence</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../portfolio/index.htm">Portfolio</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../risk/index.htm">Risk</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../serialization/index.htm">Serialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../system/index.htm">System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../trading/index.htm">Trading</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="../../../core-nightly/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Rust API<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../../developer_guide/index.htm">Developer Guide</a><button aria-label="Expand sidebar category &#x27;Developer Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="../index.htm"><span>Python API</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Accounting</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: nightly</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Accounting</h1></header>
<p>The accounting subpackage defines both different account types and account management
machinery.</p>
<p>There is also an ExchangeRateCalculator for calculating the exchange rate between FX and/or Crypto
pairs. The AccountManager is mainly used from the Portfolio to manage accounting operations.</p>
<p>The AccountFactory supports customized account types for specific integrations. These custom
account types can be registered with the factory and will then be instantiated when an AccountState
event is received for that integration.</p>
<p><a id="module-posei_trader.accounting.accounts.cash"></a></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="class-cashaccount"><em>class</em> CashAccount<a href="#class-cashaccount" class="hash-link" aria-label="Direct link to class-cashaccount" title="Direct link to class-cashaccount">​</a></h3>
<p>Bases: <code>Account</code></p>
<p>CashAccount(AccountState event, bool calculate_account_state=False)</p>
<p>Provides a cash account.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.AccountState"><em>AccountState</em></a>) – The initial account state event.</li>
<li><strong>calculate_account_state</strong> (<em>bool</em> <em>,</em> <em>optional</em>) – If the account state should be calculated from order fills.</li>
</ul>
</li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If event.account_type is not equal to <code>CASH</code>.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="account_type--1">ACCOUNT_TYPE <em>= 1</em><a href="#account_type--1" class="hash-link" aria-label="Direct link to account_type--1" title="Direct link to account_type--1">​</a></h4>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="applyself-accountstate-event--void">apply(self, AccountState event) → void<a href="#applyself-accountstate-event--void" class="hash-link" aria-label="Direct link to apply(self, AccountState event) → void" title="Direct link to apply(self, AccountState event) → void">​</a></h4>
<p>Apply the given account event to the account.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.AccountState"><em>AccountState</em></a>) – The account event to apply.</li>
<li><strong>Raises:</strong>
<ul>
<li><strong>ValueError</strong> – If event.account_type is not equal to self.type.</li>
<li><strong>ValueError</strong> – If event.account_id is not equal to self.id.</li>
<li><strong>ValueError</strong> – If event.base_currency is not equal to self.base_currency.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning">WARNING<a href="#warning" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>System method (not intended to be called by user code).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balanceself-currency-currencynone--accountbalance">balance(self, Currency currency=None) → <a href="../model/index.htm#posei_trader.model.AccountBalance">AccountBalance</a><a href="#balanceself-currency-currencynone--accountbalance" class="hash-link" aria-label="Direct link to balanceself-currency-currencynone--accountbalance" title="Direct link to balanceself-currency-currencynone--accountbalance">​</a></h4>
<p>Return the current account balance total.</p>
<p>For multi-currency accounts, specify the currency for the query.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>currency</strong> (<a href="../model/index.htm#posei_trader.model.Currency"><em>Currency</em></a> <em>,</em> <em>optional</em>) – The currency for the query. If <code>None</code> then will use the default
currency (if set).</li>
<li><strong>Return type:</strong>
AccountBalance or <code>None</code></li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If currency is <code>None</code> and base_currency is <code>None</code>.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-1">WARNING<a href="#warning-1" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>Returns <code>None</code> if there is no applicable information for the query,
rather than Money of zero amount.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balance_freeself-currency-currencynone--money">balance_free(self, Currency currency=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#balance_freeself-currency-currencynone--money" class="hash-link" aria-label="Direct link to balance_freeself-currency-currencynone--money" title="Direct link to balance_freeself-currency-currencynone--money">​</a></h4>
<p>Return the account balance free.</p>
<p>For multi-currency accounts, specify the currency for the query.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>currency</strong> (<a href="../model/index.htm#posei_trader.model.Currency"><em>Currency</em></a> <em>,</em> <em>optional</em>) – The currency for the query. If <code>None</code> then will use the default
currency (if set).</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If currency is <code>None</code> and base_currency is <code>None</code>.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-2">WARNING<a href="#warning-2" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>Returns <code>None</code> if there is no applicable information for the query,
rather than Money of zero amount.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balance_impactself-instrument-instrument-quantity-quantity-price-price-orderside-order_side--money">balance_impact(self, Instrument instrument, Quantity quantity, Price price, OrderSide order_side) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#balance_impactself-instrument-instrument-quantity-quantity-price-price-orderside-order_side--money" class="hash-link" aria-label="Direct link to balance_impactself-instrument-instrument-quantity-quantity-price-price-orderside-order_side--money" title="Direct link to balance_impactself-instrument-instrument-quantity-quantity-price-price-orderside-order_side--money">​</a></h4>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balance_lockedself-currency-currencynone--money">balance_locked(self, Currency currency=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#balance_lockedself-currency-currencynone--money" class="hash-link" aria-label="Direct link to balance_lockedself-currency-currencynone--money" title="Direct link to balance_lockedself-currency-currencynone--money">​</a></h4>
<p>Return the account balance locked.</p>
<p>For multi-currency accounts, specify the currency for the query.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>currency</strong> (<a href="../model/index.htm#posei_trader.model.Currency"><em>Currency</em></a> <em>,</em> <em>optional</em>) – The currency for the query. If <code>None</code> then will use the default
currency (if set).</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If currency is <code>None</code> and base_currency is <code>None</code>.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-3">WARNING<a href="#warning-3" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>Returns <code>None</code> if there is no applicable information for the query,
rather than Money of zero amount.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balance_totalself-currency-currencynone--money">balance_total(self, Currency currency=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#balance_totalself-currency-currencynone--money" class="hash-link" aria-label="Direct link to balance_totalself-currency-currencynone--money" title="Direct link to balance_totalself-currency-currencynone--money">​</a></h4>
<p>Return the current account balance total.</p>
<p>For multi-currency accounts, specify the currency for the query.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>currency</strong> (<a href="../model/index.htm#posei_trader.model.Currency"><em>Currency</em></a> <em>,</em> <em>optional</em>) – The currency for the query. If <code>None</code> then will use the default
currency (if set).</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If currency is <code>None</code> and base_currency is <code>None</code>.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-4">WARNING<a href="#warning-4" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>Returns <code>None</code> if there is no applicable information for the query,
rather than Money of zero amount.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balancesself--dict">balances(self) → dict<a href="#balancesself--dict" class="hash-link" aria-label="Direct link to balances(self) → dict" title="Direct link to balances(self) → dict">​</a></h4>
<p>Return the account balances totals.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balances_freeself--dict">balances_free(self) → dict<a href="#balances_freeself--dict" class="hash-link" aria-label="Direct link to balances_free(self) → dict" title="Direct link to balances_free(self) → dict">​</a></h4>
<p>Return the account balances free.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balances_lockedself--dict">balances_locked(self) → dict<a href="#balances_lockedself--dict" class="hash-link" aria-label="Direct link to balances_locked(self) → dict" title="Direct link to balances_locked(self) → dict">​</a></h4>
<p>Return the account balances locked.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balances_totalself--dict">balances_total(self) → dict<a href="#balances_totalself--dict" class="hash-link" aria-label="Direct link to balances_total(self) → dict" title="Direct link to balances_total(self) → dict">​</a></h4>
<p>Return the account balances totals.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="base_currency">base_currency<a href="#base_currency" class="hash-link" aria-label="Direct link to base_currency" title="Direct link to base_currency">​</a></h4>
<p>The accounts base currency (<code>None</code> for multi-currency accounts).</p>
<ul>
<li><strong>Returns:</strong>
Currency or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="calculate_account_state">calculate_account_state<a href="#calculate_account_state" class="hash-link" aria-label="Direct link to calculate_account_state" title="Direct link to calculate_account_state">​</a></h4>
<p>If the accounts state should be calculated by Posei.</p>
<ul>
<li><strong>Returns:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="calculate_balance_lockedself-instrument-instrument-orderside-side-quantity-quantity-price-price-bool-use_quote_for_inversefalse--money">calculate_balance_locked(self, Instrument instrument, OrderSide side, Quantity quantity, Price price, bool use_quote_for_inverse=False) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#calculate_balance_lockedself-instrument-instrument-orderside-side-quantity-quantity-price-price-bool-use_quote_for_inversefalse--money" class="hash-link" aria-label="Direct link to calculate_balance_lockedself-instrument-instrument-orderside-side-quantity-quantity-price-price-bool-use_quote_for_inversefalse--money" title="Direct link to calculate_balance_lockedself-instrument-instrument-orderside-side-quantity-quantity-price-price-bool-use_quote_for_inversefalse--money">​</a></h4>
<p>Calculate the locked balance.</p>
<p>Result will be in quote currency for standard instruments, or base
currency for inverse instruments.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument</strong> (<a href="../model/instruments/index.htm#posei_trader.model.instruments.Instrument"><em>Instrument</em></a>) – The instrument for the calculation.</li>
<li><strong>side</strong> (OrderSide {<code>BUY</code>, <code>SELL</code>}) – The order side.</li>
<li><strong>quantity</strong> (<a href="../model/index.htm#posei_trader.model.Quantity"><em>Quantity</em></a>) – The order quantity.</li>
<li><strong>price</strong> (<a href="../model/index.htm#posei_trader.model.Price"><em>Price</em></a>) – The order price.</li>
<li><strong>use_quote_for_inverse</strong> (<em>bool</em>) – If inverse instrument calculations use quote currency (instead of base).</li>
</ul>
</li>
<li><strong>Return type:</strong>
<a href="../model/index.htm#posei_trader.model.Money">Money</a></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="calculate_commissionself-instrument-instrument-quantity-last_qty-price-last_px-liquidityside-liquidity_side-bool-use_quote_for_inversefalse--money">calculate_commission(self, Instrument instrument, Quantity last_qty, Price last_px, LiquiditySide liquidity_side, bool use_quote_for_inverse=False) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#calculate_commissionself-instrument-instrument-quantity-last_qty-price-last_px-liquidityside-liquidity_side-bool-use_quote_for_inversefalse--money" class="hash-link" aria-label="Direct link to calculate_commissionself-instrument-instrument-quantity-last_qty-price-last_px-liquidityside-liquidity_side-bool-use_quote_for_inversefalse--money" title="Direct link to calculate_commissionself-instrument-instrument-quantity-last_qty-price-last_px-liquidityside-liquidity_side-bool-use_quote_for_inversefalse--money">​</a></h4>
<p>Calculate the commission generated from a transaction with the given
parameters.</p>
<p>Result will be in quote currency for standard instruments, or base
currency for inverse instruments.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument</strong> (<a href="../model/instruments/index.htm#posei_trader.model.instruments.Instrument"><em>Instrument</em></a>) – The instrument for the calculation.</li>
<li><strong>last_qty</strong> (<a href="../model/index.htm#posei_trader.model.Quantity"><em>Quantity</em></a>) – The transaction quantity.</li>
<li><strong>last_px</strong> (<a href="../model/index.htm#posei_trader.model.Price"><em>Price</em></a>) – The transaction price.</li>
<li><strong>liquidity_side</strong> (LiquiditySide {<code>MAKER</code>, <code>TAKER</code>}) – The liquidity side for the transaction.</li>
<li><strong>use_quote_for_inverse</strong> (<em>bool</em>) – If inverse instrument calculations use quote currency (instead of base).</li>
</ul>
</li>
<li><strong>Return type:</strong>
<a href="../model/index.htm#posei_trader.model.Money">Money</a></li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If liquidity_side is <code>NO_LIQUIDITY_SIDE</code>.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="calculate_pnlsself-instrument-instrument-orderfilled-fill-position-position-position--none--none--list">calculate_pnls(self, Instrument instrument, OrderFilled fill, Position position: Position | None = None) → list<a href="#calculate_pnlsself-instrument-instrument-orderfilled-fill-position-position-position--none--none--list" class="hash-link" aria-label="Direct link to calculate_pnls(self, Instrument instrument, OrderFilled fill, Position position: Position | None = None) → list" title="Direct link to calculate_pnls(self, Instrument instrument, OrderFilled fill, Position position: Position | None = None) → list">​</a></h4>
<p>Return the calculated PnL.</p>
<p>The calculation does not include any commissions.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument</strong> (<a href="../model/instruments/index.htm#posei_trader.model.instruments.Instrument"><em>Instrument</em></a>) – The instrument for the calculation.</li>
<li><strong>fill</strong> (<a href="../model/events/index.htm#posei_trader.model.events.OrderFilled"><em>OrderFilled</em></a>) – The fill for the calculation.</li>
<li><strong>position</strong> (<a href="../model/index.htm#posei_trader.model.Position"><em>Position</em></a> <em>,</em> <em>optional</em>) – The position for the calculation (can be None).</li>
</ul>
</li>
<li><strong>Return type:</strong>
list[<a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clear_balance_lockedself-instrumentid-instrument_id--void">clear_balance_locked(self, InstrumentId instrument_id) → void<a href="#clear_balance_lockedself-instrumentid-instrument_id--void" class="hash-link" aria-label="Direct link to clear_balance_locked(self, InstrumentId instrument_id) → void" title="Direct link to clear_balance_locked(self, InstrumentId instrument_id) → void">​</a></h4>
<p>Clear the balance locked for the given instrument ID.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the locked balance to clear.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="commissionself-currency-currency--money">commission(self, Currency currency) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#commissionself-currency-currency--money" class="hash-link" aria-label="Direct link to commissionself-currency-currency--money" title="Direct link to commissionself-currency-currency--money">​</a></h4>
<p>Return the total commissions for the given currency.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>currency</strong> (<a href="../model/index.htm#posei_trader.model.Currency"><em>Currency</em></a>) – The currency for the commission.</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="commissionsself--dict">commissions(self) → dict<a href="#commissionsself--dict" class="hash-link" aria-label="Direct link to commissions(self) → dict" title="Direct link to commissions(self) → dict">​</a></h4>
<p>Return the total commissions for the account.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="currenciesself--list">currencies(self) → list<a href="#currenciesself--list" class="hash-link" aria-label="Direct link to currencies(self) → list" title="Direct link to currencies(self) → list">​</a></h4>
<p>Return the account currencies.</p>
<ul>
<li><strong>Return type:</strong>
list[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="event_count">event_count<a href="#event_count" class="hash-link" aria-label="Direct link to event_count" title="Direct link to event_count">​</a></h4>
<p>Return the count of events.</p>
<ul>
<li><strong>Return type:</strong>
int</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="events">events<a href="#events" class="hash-link" aria-label="Direct link to events" title="Direct link to events">​</a></h4>
<p>Return all events received by the account.</p>
<ul>
<li><strong>Return type:</strong>
list[<a href="../model/events/index.htm#posei_trader.model.events.AccountState">AccountState</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="static-from_dictdict-values"><em>static</em> from_dict(dict values)<a href="#static-from_dictdict-values" class="hash-link" aria-label="Direct link to static-from_dictdict-values" title="Direct link to static-from_dictdict-values">​</a></h4>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="id">id<a href="#id" class="hash-link" aria-label="Direct link to id" title="Direct link to id">​</a></h4>
<p>The accounts ID.</p>
<ul>
<li><strong>Returns:</strong>
AccountId</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_cash_account">is_cash_account<a href="#is_cash_account" class="hash-link" aria-label="Direct link to is_cash_account" title="Direct link to is_cash_account">​</a></h4>
<p>If the account is a type of <code>CASH</code> account.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_margin_account">is_margin_account<a href="#is_margin_account" class="hash-link" aria-label="Direct link to is_margin_account" title="Direct link to is_margin_account">​</a></h4>
<p>If the account is a type of <code>MARGIN</code> account.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_unleveragedself-instrumentid-instrument_id--bool">is_unleveraged(self, InstrumentId instrument_id) → bool<a href="#is_unleveragedself-instrumentid-instrument_id--bool" class="hash-link" aria-label="Direct link to is_unleveraged(self, InstrumentId instrument_id) → bool" title="Direct link to is_unleveraged(self, InstrumentId instrument_id) → bool">​</a></h4>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="last_event">last_event<a href="#last_event" class="hash-link" aria-label="Direct link to last_event" title="Direct link to last_event">​</a></h4>
<p>Return the accounts last state event.</p>
<ul>
<li><strong>Return type:</strong>
<a href="../model/events/index.htm#posei_trader.model.events.AccountState">AccountState</a></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="purge_account_eventsself-uint64_t-ts_now-uint64_t-lookback_secs0--void">purge_account_events(self, uint64_t ts_now, uint64_t lookback_secs=0) → void<a href="#purge_account_eventsself-uint64_t-ts_now-uint64_t-lookback_secs0--void" class="hash-link" aria-label="Direct link to purge_account_events(self, uint64_t ts_now, uint64_t lookback_secs=0) → void" title="Direct link to purge_account_events(self, uint64_t ts_now, uint64_t lookback_secs=0) → void">​</a></h4>
<p>Purge all account state events which are outside the lookback window.</p>
<p>Guaranteed to retain at least the latest event.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>ts_now</strong> (<em>uint64_t</em>) – The current UNIX timestamp (nanoseconds).</li>
<li><strong>lookback_secs</strong> (<em>uint64_t</em> <em>,</em> <em>default 0</em>) – The purge lookback window (seconds) from when the account state event occurred.
Only events which are outside the lookback window will be purged.
A value of 0 means purge all account state events.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="starting_balancesself--dict">starting_balances(self) → dict<a href="#starting_balancesself--dict" class="hash-link" aria-label="Direct link to starting_balances(self) → dict" title="Direct link to starting_balances(self) → dict">​</a></h4>
<p>Return the account starting balances.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="static-to_dictcashaccount-obj"><em>static</em> to_dict(CashAccount obj)<a href="#static-to_dictcashaccount-obj" class="hash-link" aria-label="Direct link to static-to_dictcashaccount-obj" title="Direct link to static-to_dictcashaccount-obj">​</a></h4>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="type">type<a href="#type" class="hash-link" aria-label="Direct link to type" title="Direct link to type">​</a></h4>
<p>The accounts type.</p>
<ul>
<li><strong>Returns:</strong>
AccountType</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_balance_lockedself-instrumentid-instrument_id-money-locked--void">update_balance_locked(self, InstrumentId instrument_id, Money locked) → void<a href="#update_balance_lockedself-instrumentid-instrument_id-money-locked--void" class="hash-link" aria-label="Direct link to update_balance_locked(self, InstrumentId instrument_id, Money locked) → void" title="Direct link to update_balance_locked(self, InstrumentId instrument_id, Money locked) → void">​</a></h4>
<p>Update the balance locked for the given instrument ID.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument ID for the update.</li>
<li><strong>locked</strong> (<a href="../model/index.htm#posei_trader.model.Money"><em>Money</em></a>) – The locked balance for the instrument.</li>
</ul>
</li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If margin_init is negative (&lt; 0).</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-5">WARNING<a href="#warning-5" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>System method (not intended to be called by user code).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_balancesself-list-balances-bool-allow_zerotrue--void">update_balances(self, list balances, bool allow_zero=True) → void<a href="#update_balancesself-list-balances-bool-allow_zerotrue--void" class="hash-link" aria-label="Direct link to update_balances(self, list balances, bool allow_zero=True) → void" title="Direct link to update_balances(self, list balances, bool allow_zero=True) → void">​</a></h4>
<p>Update the account balances.</p>
<p>There is no guarantee that every account currency is included in the
given balances, therefore we only update included balances.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>balances</strong> (<em>list</em> <em>[</em><a href="../model/index.htm#posei_trader.model.AccountBalance"><em>AccountBalance</em></a> <em>]</em>) – The balances for the update.</li>
<li><strong>allow_zero</strong> (<em>bool</em> <em>,</em> <em>default True</em>) – If zero balances are allowed (will then just clear the assets balance).</li>
</ul>
</li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If balances is empty.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_commissionsself-money-commission--void">update_commissions(self, Money commission) → void<a href="#update_commissionsself-money-commission--void" class="hash-link" aria-label="Direct link to update_commissions(self, Money commission) → void" title="Direct link to update_commissions(self, Money commission) → void">​</a></h4>
<p>Update the commissions.</p>
<p>Can be negative which represents credited commission.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>commission</strong> (<a href="../model/index.htm#posei_trader.model.Money"><em>Money</em></a>) – The commission to update with.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-6">WARNING<a href="#warning-6" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>System method (not intended to be called by user code).</p>
<p><a id="module-posei_trader.accounting.accounts.margin"></a></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="class-marginaccount"><em>class</em> MarginAccount<a href="#class-marginaccount" class="hash-link" aria-label="Direct link to class-marginaccount" title="Direct link to class-marginaccount">​</a></h3>
<p>Bases: <code>Account</code></p>
<p>MarginAccount(AccountState event, bool calculate_account_state=False)</p>
<p>Provides a margin account.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.AccountState"><em>AccountState</em></a>) – The initial account state event.</li>
<li><strong>calculate_account_state</strong> (<em>bool</em> <em>,</em> <em>optional</em>) – If the account state should be calculated from order fills.</li>
</ul>
</li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If event.account_type is not equal to <code>MARGIN</code>.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="applyself-accountstate-event--void-1">apply(self, AccountState event) → void<a href="#applyself-accountstate-event--void-1" class="hash-link" aria-label="Direct link to apply(self, AccountState event) → void" title="Direct link to apply(self, AccountState event) → void">​</a></h4>
<p>Apply the given account event to the account.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.AccountState"><em>AccountState</em></a>) – The account event to apply.</li>
<li><strong>Raises:</strong>
<ul>
<li><strong>ValueError</strong> – If event.account_type is not equal to self.type.</li>
<li><strong>ValueError</strong> – If event.account_id is not equal to self.id.</li>
<li><strong>ValueError</strong> – If event.base_currency is not equal to self.base_currency.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-7">WARNING<a href="#warning-7" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>System method (not intended to be called by user code).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balanceself-currency-currencynone--accountbalance-1">balance(self, Currency currency=None) → <a href="../model/index.htm#posei_trader.model.AccountBalance">AccountBalance</a><a href="#balanceself-currency-currencynone--accountbalance-1" class="hash-link" aria-label="Direct link to balanceself-currency-currencynone--accountbalance-1" title="Direct link to balanceself-currency-currencynone--accountbalance-1">​</a></h4>
<p>Return the current account balance total.</p>
<p>For multi-currency accounts, specify the currency for the query.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>currency</strong> (<a href="../model/index.htm#posei_trader.model.Currency"><em>Currency</em></a> <em>,</em> <em>optional</em>) – The currency for the query. If <code>None</code> then will use the default
currency (if set).</li>
<li><strong>Return type:</strong>
AccountBalance or <code>None</code></li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If currency is <code>None</code> and base_currency is <code>None</code>.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-8">WARNING<a href="#warning-8" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>Returns <code>None</code> if there is no applicable information for the query,
rather than Money of zero amount.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balance_freeself-currency-currencynone--money-1">balance_free(self, Currency currency=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#balance_freeself-currency-currencynone--money-1" class="hash-link" aria-label="Direct link to balance_freeself-currency-currencynone--money-1" title="Direct link to balance_freeself-currency-currencynone--money-1">​</a></h4>
<p>Return the account balance free.</p>
<p>For multi-currency accounts, specify the currency for the query.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>currency</strong> (<a href="../model/index.htm#posei_trader.model.Currency"><em>Currency</em></a> <em>,</em> <em>optional</em>) – The currency for the query. If <code>None</code> then will use the default
currency (if set).</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If currency is <code>None</code> and base_currency is <code>None</code>.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-9">WARNING<a href="#warning-9" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>Returns <code>None</code> if there is no applicable information for the query,
rather than Money of zero amount.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balance_impactself-instrument-instrument-quantity-quantity-price-price-orderside-order_side--money-1">balance_impact(self, Instrument instrument, Quantity quantity, Price price, OrderSide order_side) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#balance_impactself-instrument-instrument-quantity-quantity-price-price-orderside-order_side--money-1" class="hash-link" aria-label="Direct link to balance_impactself-instrument-instrument-quantity-quantity-price-price-orderside-order_side--money-1" title="Direct link to balance_impactself-instrument-instrument-quantity-quantity-price-price-orderside-order_side--money-1">​</a></h4>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balance_lockedself-currency-currencynone--money-1">balance_locked(self, Currency currency=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#balance_lockedself-currency-currencynone--money-1" class="hash-link" aria-label="Direct link to balance_lockedself-currency-currencynone--money-1" title="Direct link to balance_lockedself-currency-currencynone--money-1">​</a></h4>
<p>Return the account balance locked.</p>
<p>For multi-currency accounts, specify the currency for the query.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>currency</strong> (<a href="../model/index.htm#posei_trader.model.Currency"><em>Currency</em></a> <em>,</em> <em>optional</em>) – The currency for the query. If <code>None</code> then will use the default
currency (if set).</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If currency is <code>None</code> and base_currency is <code>None</code>.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-10">WARNING<a href="#warning-10" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>Returns <code>None</code> if there is no applicable information for the query,
rather than Money of zero amount.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balance_totalself-currency-currencynone--money-1">balance_total(self, Currency currency=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#balance_totalself-currency-currencynone--money-1" class="hash-link" aria-label="Direct link to balance_totalself-currency-currencynone--money-1" title="Direct link to balance_totalself-currency-currencynone--money-1">​</a></h4>
<p>Return the current account balance total.</p>
<p>For multi-currency accounts, specify the currency for the query.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>currency</strong> (<a href="../model/index.htm#posei_trader.model.Currency"><em>Currency</em></a> <em>,</em> <em>optional</em>) – The currency for the query. If <code>None</code> then will use the default
currency (if set).</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If currency is <code>None</code> and base_currency is <code>None</code>.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-11">WARNING<a href="#warning-11" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>Returns <code>None</code> if there is no applicable information for the query,
rather than Money of zero amount.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balancesself--dict-1">balances(self) → dict<a href="#balancesself--dict-1" class="hash-link" aria-label="Direct link to balances(self) → dict" title="Direct link to balances(self) → dict">​</a></h4>
<p>Return the account balances totals.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balances_freeself--dict-1">balances_free(self) → dict<a href="#balances_freeself--dict-1" class="hash-link" aria-label="Direct link to balances_free(self) → dict" title="Direct link to balances_free(self) → dict">​</a></h4>
<p>Return the account balances free.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balances_lockedself--dict-1">balances_locked(self) → dict<a href="#balances_lockedself--dict-1" class="hash-link" aria-label="Direct link to balances_locked(self) → dict" title="Direct link to balances_locked(self) → dict">​</a></h4>
<p>Return the account balances locked.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balances_totalself--dict-1">balances_total(self) → dict<a href="#balances_totalself--dict-1" class="hash-link" aria-label="Direct link to balances_total(self) → dict" title="Direct link to balances_total(self) → dict">​</a></h4>
<p>Return the account balances totals.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="base_currency-1">base_currency<a href="#base_currency-1" class="hash-link" aria-label="Direct link to base_currency" title="Direct link to base_currency">​</a></h4>
<p>The accounts base currency (<code>None</code> for multi-currency accounts).</p>
<ul>
<li><strong>Returns:</strong>
Currency or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="calculate_account_state-1">calculate_account_state<a href="#calculate_account_state-1" class="hash-link" aria-label="Direct link to calculate_account_state" title="Direct link to calculate_account_state">​</a></h4>
<p>If the accounts state should be calculated by Posei.</p>
<ul>
<li><strong>Returns:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="calculate_commissionself-instrument-instrument-quantity-last_qty-price-last_px-liquidityside-liquidity_side-bool-use_quote_for_inversefalse--money-1">calculate_commission(self, Instrument instrument, Quantity last_qty, Price last_px, LiquiditySide liquidity_side, bool use_quote_for_inverse=False) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#calculate_commissionself-instrument-instrument-quantity-last_qty-price-last_px-liquidityside-liquidity_side-bool-use_quote_for_inversefalse--money-1" class="hash-link" aria-label="Direct link to calculate_commissionself-instrument-instrument-quantity-last_qty-price-last_px-liquidityside-liquidity_side-bool-use_quote_for_inversefalse--money-1" title="Direct link to calculate_commissionself-instrument-instrument-quantity-last_qty-price-last_px-liquidityside-liquidity_side-bool-use_quote_for_inversefalse--money-1">​</a></h4>
<p>Calculate the commission generated from a transaction with the given
parameters.</p>
<p>Result will be in quote currency for standard instruments, or base
currency for inverse instruments.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument</strong> (<a href="../model/instruments/index.htm#posei_trader.model.instruments.Instrument"><em>Instrument</em></a>) – The instrument for the calculation.</li>
<li><strong>last_qty</strong> (<a href="../model/index.htm#posei_trader.model.Quantity"><em>Quantity</em></a>) – The transaction quantity.</li>
<li><strong>last_px</strong> (<a href="../model/index.htm#posei_trader.model.Price"><em>Price</em></a>) – The transaction price.</li>
<li><strong>liquidity_side</strong> (LiquiditySide {<code>MAKER</code>, <code>TAKER</code>}) – The liquidity side for the transaction.</li>
<li><strong>use_quote_for_inverse</strong> (<em>bool</em>) – If inverse instrument calculations use quote currency (instead of base).</li>
</ul>
</li>
<li><strong>Return type:</strong>
<a href="../model/index.htm#posei_trader.model.Money">Money</a></li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If liquidity_side is <code>NO_LIQUIDITY_SIDE</code>.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="calculate_margin_initself-instrument-instrument-quantity-quantity-price-price-bool-use_quote_for_inversefalse--money">calculate_margin_init(self, Instrument instrument, Quantity quantity, Price price, bool use_quote_for_inverse=False) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#calculate_margin_initself-instrument-instrument-quantity-quantity-price-price-bool-use_quote_for_inversefalse--money" class="hash-link" aria-label="Direct link to calculate_margin_initself-instrument-instrument-quantity-quantity-price-price-bool-use_quote_for_inversefalse--money" title="Direct link to calculate_margin_initself-instrument-instrument-quantity-quantity-price-price-bool-use_quote_for_inversefalse--money">​</a></h4>
<p>Calculate the initial (order) margin.</p>
<p>Result will be in quote currency for standard instruments, or base
currency for inverse instruments.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument</strong> (<a href="../model/instruments/index.htm#posei_trader.model.instruments.Instrument"><em>Instrument</em></a>) – The instrument for the calculation.</li>
<li><strong>quantity</strong> (<a href="../model/index.htm#posei_trader.model.Quantity"><em>Quantity</em></a>) – The order quantity.</li>
<li><strong>price</strong> (<a href="../model/index.htm#posei_trader.model.Price"><em>Price</em></a>) – The order price.</li>
<li><strong>use_quote_for_inverse</strong> (<em>bool</em>) – If inverse instrument calculations use quote currency (instead of base).</li>
</ul>
</li>
<li><strong>Return type:</strong>
<a href="../model/index.htm#posei_trader.model.Money">Money</a></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="calculate_margin_maintself-instrument-instrument-positionside-side-quantity-quantity-price-price-bool-use_quote_for_inversefalse--money">calculate_margin_maint(self, Instrument instrument, PositionSide side, Quantity quantity, Price price, bool use_quote_for_inverse=False) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#calculate_margin_maintself-instrument-instrument-positionside-side-quantity-quantity-price-price-bool-use_quote_for_inversefalse--money" class="hash-link" aria-label="Direct link to calculate_margin_maintself-instrument-instrument-positionside-side-quantity-quantity-price-price-bool-use_quote_for_inversefalse--money" title="Direct link to calculate_margin_maintself-instrument-instrument-positionside-side-quantity-quantity-price-price-bool-use_quote_for_inversefalse--money">​</a></h4>
<p>Calculate the maintenance (position) margin.</p>
<p>Result will be in quote currency for standard instruments, or base
currency for inverse instruments.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument</strong> (<a href="../model/instruments/index.htm#posei_trader.model.instruments.Instrument"><em>Instrument</em></a>) – The instrument for the calculation.</li>
<li><strong>side</strong> (PositionSide {<code>LONG</code>, <code>SHORT</code>}) – The currency position side.</li>
<li><strong>quantity</strong> (<a href="../model/index.htm#posei_trader.model.Quantity"><em>Quantity</em></a>) – The currency position quantity.</li>
<li><strong>price</strong> (<a href="../model/index.htm#posei_trader.model.Price"><em>Price</em></a>) – The positions current price.</li>
<li><strong>use_quote_for_inverse</strong> (<em>bool</em>) – If inverse instrument calculations use quote currency (instead of base).</li>
</ul>
</li>
<li><strong>Return type:</strong>
<a href="../model/index.htm#posei_trader.model.Money">Money</a></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="calculate_pnlsself-instrument-instrument-orderfilled-fill-position-position-position--none--none--list-1">calculate_pnls(self, Instrument instrument, OrderFilled fill, Position position: Position | None = None) → list<a href="#calculate_pnlsself-instrument-instrument-orderfilled-fill-position-position-position--none--none--list-1" class="hash-link" aria-label="Direct link to calculate_pnls(self, Instrument instrument, OrderFilled fill, Position position: Position | None = None) → list" title="Direct link to calculate_pnls(self, Instrument instrument, OrderFilled fill, Position position: Position | None = None) → list">​</a></h4>
<p>Return the calculated PnL.</p>
<p>The calculation does not include any commissions.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument</strong> (<a href="../model/instruments/index.htm#posei_trader.model.instruments.Instrument"><em>Instrument</em></a>) – The instrument for the calculation.</li>
<li><strong>fill</strong> (<a href="../model/events/index.htm#posei_trader.model.events.OrderFilled"><em>OrderFilled</em></a>) – The fill for the calculation.</li>
<li><strong>position</strong> (<a href="../model/index.htm#posei_trader.model.Position"><em>Position</em></a> <em>,</em> <em>optional</em>) – The position for the calculation.</li>
</ul>
</li>
<li><strong>Return type:</strong>
list[<a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clear_marginself-instrumentid-instrument_id--void">clear_margin(self, InstrumentId instrument_id) → void<a href="#clear_marginself-instrumentid-instrument_id--void" class="hash-link" aria-label="Direct link to clear_margin(self, InstrumentId instrument_id) → void" title="Direct link to clear_margin(self, InstrumentId instrument_id) → void">​</a></h4>
<p>Clear the maintenance (position) margins for the given instrument ID.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the maintenance margin to clear.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-12">WARNING<a href="#warning-12" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>System method (not intended to be called by user code).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clear_margin_initself-instrumentid-instrument_id--void">clear_margin_init(self, InstrumentId instrument_id) → void<a href="#clear_margin_initself-instrumentid-instrument_id--void" class="hash-link" aria-label="Direct link to clear_margin_init(self, InstrumentId instrument_id) → void" title="Direct link to clear_margin_init(self, InstrumentId instrument_id) → void">​</a></h4>
<p>Clear the initial (order) margins for the given instrument ID.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the initial margin to clear.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-13">WARNING<a href="#warning-13" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>System method (not intended to be called by user code).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clear_margin_maintself-instrumentid-instrument_id--void">clear_margin_maint(self, InstrumentId instrument_id) → void<a href="#clear_margin_maintself-instrumentid-instrument_id--void" class="hash-link" aria-label="Direct link to clear_margin_maint(self, InstrumentId instrument_id) → void" title="Direct link to clear_margin_maint(self, InstrumentId instrument_id) → void">​</a></h4>
<p>Clear the maintenance (position) margins for the given instrument ID.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the maintenance margin to clear.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-14">WARNING<a href="#warning-14" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>System method (not intended to be called by user code).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="commissionself-currency-currency--money-1">commission(self, Currency currency) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#commissionself-currency-currency--money-1" class="hash-link" aria-label="Direct link to commissionself-currency-currency--money-1" title="Direct link to commissionself-currency-currency--money-1">​</a></h4>
<p>Return the total commissions for the given currency.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>currency</strong> (<a href="../model/index.htm#posei_trader.model.Currency"><em>Currency</em></a>) – The currency for the commission.</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="commissionsself--dict-1">commissions(self) → dict<a href="#commissionsself--dict-1" class="hash-link" aria-label="Direct link to commissions(self) → dict" title="Direct link to commissions(self) → dict">​</a></h4>
<p>Return the total commissions for the account.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="currenciesself--list-1">currencies(self) → list<a href="#currenciesself--list-1" class="hash-link" aria-label="Direct link to currencies(self) → list" title="Direct link to currencies(self) → list">​</a></h4>
<p>Return the account currencies.</p>
<ul>
<li><strong>Return type:</strong>
list[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="default_leverage">default_leverage<a href="#default_leverage" class="hash-link" aria-label="Direct link to default_leverage" title="Direct link to default_leverage">​</a></h4>
<p>The accounts default leverage setting.</p>
<ul>
<li><strong>Returns:</strong>
Decimal</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="event_count-1">event_count<a href="#event_count-1" class="hash-link" aria-label="Direct link to event_count" title="Direct link to event_count">​</a></h4>
<p>Return the count of events.</p>
<ul>
<li><strong>Return type:</strong>
int</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="events-1">events<a href="#events-1" class="hash-link" aria-label="Direct link to events" title="Direct link to events">​</a></h4>
<p>Return all events received by the account.</p>
<ul>
<li><strong>Return type:</strong>
list[<a href="../model/events/index.htm#posei_trader.model.events.AccountState">AccountState</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="static-from_dictdict-values-1"><em>static</em> from_dict(dict values)<a href="#static-from_dictdict-values-1" class="hash-link" aria-label="Direct link to static-from_dictdict-values-1" title="Direct link to static-from_dictdict-values-1">​</a></h4>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="id-1">id<a href="#id-1" class="hash-link" aria-label="Direct link to id" title="Direct link to id">​</a></h4>
<p>The accounts ID.</p>
<ul>
<li><strong>Returns:</strong>
AccountId</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_cash_account-1">is_cash_account<a href="#is_cash_account-1" class="hash-link" aria-label="Direct link to is_cash_account" title="Direct link to is_cash_account">​</a></h4>
<p>If the account is a type of <code>CASH</code> account.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_margin_account-1">is_margin_account<a href="#is_margin_account-1" class="hash-link" aria-label="Direct link to is_margin_account" title="Direct link to is_margin_account">​</a></h4>
<p>If the account is a type of <code>MARGIN</code> account.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_unleveragedself-instrumentid-instrument_id--bool-1">is_unleveraged(self, InstrumentId instrument_id) → bool<a href="#is_unleveragedself-instrumentid-instrument_id--bool-1" class="hash-link" aria-label="Direct link to is_unleveraged(self, InstrumentId instrument_id) → bool" title="Direct link to is_unleveraged(self, InstrumentId instrument_id) → bool">​</a></h4>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="last_event-1">last_event<a href="#last_event-1" class="hash-link" aria-label="Direct link to last_event" title="Direct link to last_event">​</a></h4>
<p>Return the accounts last state event.</p>
<ul>
<li><strong>Return type:</strong>
<a href="../model/events/index.htm#posei_trader.model.events.AccountState">AccountState</a></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="leverageself-instrumentid-instrument_id">leverage(self, InstrumentId instrument_id)<a href="#leverageself-instrumentid-instrument_id" class="hash-link" aria-label="Direct link to leverage(self, InstrumentId instrument_id)" title="Direct link to leverage(self, InstrumentId instrument_id)">​</a></h4>
<p>Return the leverage for the given instrument (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument ID for the leverage.</li>
<li><strong>Return type:</strong>
Decimal or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="leveragesself--dict">leverages(self) → dict<a href="#leveragesself--dict" class="hash-link" aria-label="Direct link to leverages(self) → dict" title="Direct link to leverages(self) → dict">​</a></h4>
<p>Return the account leverages.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId">InstrumentId</a>, Decimal]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="marginself-instrumentid-instrument_id--marginbalance">margin(self, InstrumentId instrument_id) → <a href="../model/index.htm#posei_trader.model.MarginBalance">MarginBalance</a><a href="#marginself-instrumentid-instrument_id--marginbalance" class="hash-link" aria-label="Direct link to marginself-instrumentid-instrument_id--marginbalance" title="Direct link to marginself-instrumentid-instrument_id--marginbalance">​</a></h4>
<p>Return the current margin balance.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument ID for the query.</li>
<li><strong>Return type:</strong>
MarginBalance or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-15">WARNING<a href="#warning-15" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>Returns <code>None</code> if there is no applicable information for the query,
rather than MarginBalance with zero amounts.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="margin_initself-instrumentid-instrument_id--money">margin_init(self, InstrumentId instrument_id) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#margin_initself-instrumentid-instrument_id--money" class="hash-link" aria-label="Direct link to margin_initself-instrumentid-instrument_id--money" title="Direct link to margin_initself-instrumentid-instrument_id--money">​</a></h4>
<p>Return the current initial (order) margin.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument ID for the query.</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-16">WARNING<a href="#warning-16" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>Returns <code>None</code> if there is no applicable information for the query,
rather than Money of zero amount.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="margin_maintself-instrumentid-instrument_id--money">margin_maint(self, InstrumentId instrument_id) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#margin_maintself-instrumentid-instrument_id--money" class="hash-link" aria-label="Direct link to margin_maintself-instrumentid-instrument_id--money" title="Direct link to margin_maintself-instrumentid-instrument_id--money">​</a></h4>
<p>Return the current maintenance (position) margin.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument ID for the query.</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-17">WARNING<a href="#warning-17" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>Returns <code>None</code> if there is no applicable information for the query,
rather than Money of zero amount.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="marginsself--dict">margins(self) → dict<a href="#marginsself--dict" class="hash-link" aria-label="Direct link to margins(self) → dict" title="Direct link to margins(self) → dict">​</a></h4>
<p>Return the initial (order) margins for the account.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId">InstrumentId</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="margins_initself--dict">margins_init(self) → dict<a href="#margins_initself--dict" class="hash-link" aria-label="Direct link to margins_init(self) → dict" title="Direct link to margins_init(self) → dict">​</a></h4>
<p>Return the initial (order) margins for the account.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId">InstrumentId</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="margins_maintself--dict">margins_maint(self) → dict<a href="#margins_maintself--dict" class="hash-link" aria-label="Direct link to margins_maint(self) → dict" title="Direct link to margins_maint(self) → dict">​</a></h4>
<p>Return the maintenance (position) margins for the account.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId">InstrumentId</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="purge_account_eventsself-uint64_t-ts_now-uint64_t-lookback_secs0--void-1">purge_account_events(self, uint64_t ts_now, uint64_t lookback_secs=0) → void<a href="#purge_account_eventsself-uint64_t-ts_now-uint64_t-lookback_secs0--void-1" class="hash-link" aria-label="Direct link to purge_account_events(self, uint64_t ts_now, uint64_t lookback_secs=0) → void" title="Direct link to purge_account_events(self, uint64_t ts_now, uint64_t lookback_secs=0) → void">​</a></h4>
<p>Purge all account state events which are outside the lookback window.</p>
<p>Guaranteed to retain at least the latest event.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>ts_now</strong> (<em>uint64_t</em>) – The current UNIX timestamp (nanoseconds).</li>
<li><strong>lookback_secs</strong> (<em>uint64_t</em> <em>,</em> <em>default 0</em>) – The purge lookback window (seconds) from when the account state event occurred.
Only events which are outside the lookback window will be purged.
A value of 0 means purge all account state events.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set_default_leverageself-leverage-decimal--void">set_default_leverage(self, leverage: Decimal) → void<a href="#set_default_leverageself-leverage-decimal--void" class="hash-link" aria-label="Direct link to set_default_leverage(self, leverage: Decimal) → void" title="Direct link to set_default_leverage(self, leverage: Decimal) → void">​</a></h4>
<p>Set the default leverage for the account (if not specified by instrument).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>leverage</strong> (<em>Decimal</em>) – The default leverage value</li>
<li><strong>Returns:</strong>
<ul>
<li><em>TypeError</em> – If leverage is not of type Decimal.</li>
<li><em>ValueError</em> – If leverage is not &gt;= 1.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set_leverageself-instrumentid-instrument_id-leverage-decimal--void">set_leverage(self, InstrumentId instrument_id, leverage: Decimal) → void<a href="#set_leverageself-instrumentid-instrument_id-leverage-decimal--void" class="hash-link" aria-label="Direct link to set_leverage(self, InstrumentId instrument_id, leverage: Decimal) → void" title="Direct link to set_leverage(self, InstrumentId instrument_id, leverage: Decimal) → void">​</a></h4>
<p>Set the leverage for the given instrument.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the leverage.</li>
<li><strong>leverage</strong> (<em>Decimal</em>) – The leverage value</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><em>TypeError</em> – If leverage is not of type Decimal.</li>
<li><em>ValueError</em> – If leverage is not &gt;= 1.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="starting_balancesself--dict-1">starting_balances(self) → dict<a href="#starting_balancesself--dict-1" class="hash-link" aria-label="Direct link to starting_balances(self) → dict" title="Direct link to starting_balances(self) → dict">​</a></h4>
<p>Return the account starting balances.</p>
<ul>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="static-to_dictmarginaccount-obj"><em>static</em> to_dict(MarginAccount obj)<a href="#static-to_dictmarginaccount-obj" class="hash-link" aria-label="Direct link to static-to_dictmarginaccount-obj" title="Direct link to static-to_dictmarginaccount-obj">​</a></h4>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="type-1">type<a href="#type-1" class="hash-link" aria-label="Direct link to type" title="Direct link to type">​</a></h4>
<p>The accounts type.</p>
<ul>
<li><strong>Returns:</strong>
AccountType</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_balancesself-list-balances-bool-allow_zerotrue--void-1">update_balances(self, list balances, bool allow_zero=True) → void<a href="#update_balancesself-list-balances-bool-allow_zerotrue--void-1" class="hash-link" aria-label="Direct link to update_balances(self, list balances, bool allow_zero=True) → void" title="Direct link to update_balances(self, list balances, bool allow_zero=True) → void">​</a></h4>
<p>Update the account balances.</p>
<p>There is no guarantee that every account currency is included in the
given balances, therefore we only update included balances.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>balances</strong> (<em>list</em> <em>[</em><a href="../model/index.htm#posei_trader.model.AccountBalance"><em>AccountBalance</em></a> <em>]</em>) – The balances for the update.</li>
<li><strong>allow_zero</strong> (<em>bool</em> <em>,</em> <em>default True</em>) – If zero balances are allowed (will then just clear the assets balance).</li>
</ul>
</li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If balances is empty.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_commissionsself-money-commission--void-1">update_commissions(self, Money commission) → void<a href="#update_commissionsself-money-commission--void-1" class="hash-link" aria-label="Direct link to update_commissions(self, Money commission) → void" title="Direct link to update_commissions(self, Money commission) → void">​</a></h4>
<p>Update the commissions.</p>
<p>Can be negative which represents credited commission.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>commission</strong> (<a href="../model/index.htm#posei_trader.model.Money"><em>Money</em></a>) – The commission to update with.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-18">WARNING<a href="#warning-18" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>System method (not intended to be called by user code).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_marginself-marginbalance-margin--void">update_margin(self, MarginBalance margin) → void<a href="#update_marginself-marginbalance-margin--void" class="hash-link" aria-label="Direct link to update_margin(self, MarginBalance margin) → void" title="Direct link to update_margin(self, MarginBalance margin) → void">​</a></h4>
<p>Update the margin balance.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>margin</strong> (<a href="../model/index.htm#posei_trader.model.MarginBalance"><em>MarginBalance</em></a>)</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-19">WARNING<a href="#warning-19" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>System method (not intended to be called by user code).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_margin_initself-instrumentid-instrument_id-money-margin_init--void">update_margin_init(self, InstrumentId instrument_id, Money margin_init) → void<a href="#update_margin_initself-instrumentid-instrument_id-money-margin_init--void" class="hash-link" aria-label="Direct link to update_margin_init(self, InstrumentId instrument_id, Money margin_init) → void" title="Direct link to update_margin_init(self, InstrumentId instrument_id, Money margin_init) → void">​</a></h4>
<p>Update the initial (order) margin.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument ID for the update.</li>
<li><strong>margin_init</strong> (<a href="../model/index.htm#posei_trader.model.Money"><em>Money</em></a>) – The current initial (order) margin for the instrument.</li>
</ul>
</li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If margin_init is negative (&lt; 0).</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-20">WARNING<a href="#warning-20" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>System method (not intended to be called by user code).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_margin_maintself-instrumentid-instrument_id-money-margin_maint--void">update_margin_maint(self, InstrumentId instrument_id, Money margin_maint) → void<a href="#update_margin_maintself-instrumentid-instrument_id-money-margin_maint--void" class="hash-link" aria-label="Direct link to update_margin_maint(self, InstrumentId instrument_id, Money margin_maint) → void" title="Direct link to update_margin_maint(self, InstrumentId instrument_id, Money margin_maint) → void">​</a></h4>
<p>Update the maintenance (position) margin.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument ID for the update.</li>
<li><strong>margin_maint</strong> (<a href="../model/index.htm#posei_trader.model.Money"><em>Money</em></a>) – The current maintenance (position) margin for the instrument.</li>
</ul>
</li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If margin_maint is negative (&lt; 0).</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="warning-21">WARNING<a href="#warning-21" class="hash-link" aria-label="Direct link to WARNING" title="Direct link to WARNING">​</a></h4>
<p>System method (not intended to be called by user code).</p>
<p><a id="module-posei_trader.accounting.calculators"></a></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="class-rolloverinterestcalculator"><em>class</em> RolloverInterestCalculator<a href="#class-rolloverinterestcalculator" class="hash-link" aria-label="Direct link to class-rolloverinterestcalculator" title="Direct link to class-rolloverinterestcalculator">​</a></h3>
<p>Bases: <code>object</code></p>
<p>RolloverInterestCalculator(data: pd.DataFrame)</p>
<p>Provides rollover interest rate calculations.</p>
<p>If rate_data_csv_path is empty then will default to the included short-term
interest rate data csv (data since 1956).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>data</strong> (<em>str</em>) – The short term interest rate data.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="calc_overnight_rateself-instrumentid-instrument_id-date-date">calc_overnight_rate(self, InstrumentId instrument_id, date date)<a href="#calc_overnight_rateself-instrumentid-instrument_id-date-date" class="hash-link" aria-label="Direct link to calc_overnight_rate(self, InstrumentId instrument_id, date date)" title="Direct link to calc_overnight_rate(self, InstrumentId instrument_id, date date)">​</a></h4>
<p>Return the rollover interest rate between the given base currency and quote currency.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The forex instrument ID for the calculation.</li>
<li><strong>date</strong> (<em>date</em>) – The date for the overnight rate.</li>
</ul>
</li>
<li><strong>Return type:</strong>
Decimal</li>
<li><strong>Raises:</strong>
<strong>ValueError</strong> – If instrument_id.symbol length is not in range [6, 7].</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="get_rate_dataself">get_rate_data(self)<a href="#get_rate_dataself" class="hash-link" aria-label="Direct link to get_rate_data(self)" title="Direct link to get_rate_data(self)">​</a></h4>
<p>Return the short-term interest rate dataframe.</p>
<ul>
<li><strong>Return type:</strong>
pd.DataFrame</li>
</ul>
<p><a id="module-posei_trader.accounting.factory"></a></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="class-accountfactory"><em>class</em> AccountFactory<a href="#class-accountfactory" class="hash-link" aria-label="Direct link to class-accountfactory" title="Direct link to class-accountfactory">​</a></h3>
<p>Bases: <code>object</code></p>
<p>Provides a factory for creating different account types.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="static-createaccountstate-event--account"><em>static</em> create(AccountState event) → Account<a href="#static-createaccountstate-event--account" class="hash-link" aria-label="Direct link to static-createaccountstate-event--account" title="Direct link to static-createaccountstate-event--account">​</a></h4>
<p>Create an account based on the events account type.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.AccountState"><em>AccountState</em></a>) – The account state event for the creation.</li>
<li><strong>Return type:</strong>
Account</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="static-register_account_typestr-issuer-type-account_cls"><em>static</em> register_account_type(str issuer, type account_cls)<a href="#static-register_account_typestr-issuer-type-account_cls" class="hash-link" aria-label="Direct link to static-register_account_typestr-issuer-type-account_cls" title="Direct link to static-register_account_typestr-issuer-type-account_cls">​</a></h4>
<p>Register the given custom account type for the issuer.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>issuer</strong> (<em>str</em>) – The issuer for the account.</li>
<li><strong>account_cls</strong> (<em>type</em>) – The custom account type.</li>
</ul>
</li>
<li><strong>Raises:</strong>
<strong>KeyError</strong> – If issuer has already registered a custom account type.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="static-register_calculated_accountstr-issuer"><em>static</em> register_calculated_account(str issuer)<a href="#static-register_calculated_accountstr-issuer" class="hash-link" aria-label="Direct link to static-register_calculated_accountstr-issuer" title="Direct link to static-register_calculated_accountstr-issuer">​</a></h4>
<p>Register for account state of the given issuer to be calculated from
order fills.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>issuer</strong> (<em>str</em>) – The issuer for the account.</li>
<li><strong>Raises:</strong>
<strong>KeyError</strong> – If an issuer has already been registered for the issuer.</li>
</ul>
<p><a id="module-posei_trader.accounting.manager"></a></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="class-accountsmanager"><em>class</em> AccountsManager<a href="#class-accountsmanager" class="hash-link" aria-label="Direct link to class-accountsmanager" title="Direct link to class-accountsmanager">​</a></h3>
<p>Bases: <code>object</code></p>
<p>AccountsManager(CacheFacade cache, Logger logger, Clock clock) -&gt; None</p>
<p>Provides account management functionality.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>cache</strong> (<a href="../cache/index.htm#posei_trader.cache.base.CacheFacade"><em>CacheFacade</em></a>) – The read-only cache for the manager.</li>
<li><strong>logger</strong> (<a href="../common/index.htm#posei_trader.common.component.Logger"><em>Logger</em></a>) – The logger for the manager.</li>
<li><strong>clock</strong> (<a href="../common/index.htm#posei_trader.common.component.Clock"><em>Clock</em></a>) – The clock for the manager.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="generate_account_stateself-account-account-uint64_t-ts_event--accountstate">generate_account_state(self, Account account, uint64_t ts_event) → <a href="../model/events/index.htm#posei_trader.model.events.AccountState">AccountState</a><a href="#generate_account_stateself-account-account-uint64_t-ts_event--accountstate" class="hash-link" aria-label="Direct link to generate_account_stateself-account-account-uint64_t-ts_event--accountstate" title="Direct link to generate_account_stateself-account-account-uint64_t-ts_event--accountstate">​</a></h4>
<p>Generate a new account state event for the given account.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>account</strong> (<em>Account</em>) – The account for the state event.</li>
<li><strong>ts_event</strong> (<em>uint64_t</em>) – The UNIX timestamp (nanoseconds) when the event occurred.</li>
</ul>
</li>
<li><strong>Return type:</strong>
<a href="../model/events/index.htm#posei_trader.model.events.AccountState">AccountState</a></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_balancesself-account-account-instrument-instrument-orderfilled-fill--void">update_balances(self, Account account, Instrument instrument, OrderFilled fill) → void<a href="#update_balancesself-account-account-instrument-instrument-orderfilled-fill--void" class="hash-link" aria-label="Direct link to update_balances(self, Account account, Instrument instrument, OrderFilled fill) → void" title="Direct link to update_balances(self, Account account, Instrument instrument, OrderFilled fill) → void">​</a></h4>
<p>Update the account balances based on the fill event.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>account</strong> (<em>Account</em>) – The account to update.</li>
<li><strong>instrument</strong> (<a href="../model/instruments/index.htm#posei_trader.model.instruments.Instrument"><em>Instrument</em></a>) – The instrument for the update.</li>
<li><strong>fill</strong> (<a href="../model/events/index.htm#posei_trader.model.events.OrderFilled"><em>OrderFilled</em></a>) – The order filled event for the update</li>
</ul>
</li>
<li><strong>Raises:</strong>
<strong>AccountBalanceNegative</strong> – If a new free balance would become negative.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_ordersself-account-account-instrument-instrument-list-orders_open-uint64_t-ts_event--bool">update_orders(self, Account account, Instrument instrument, list orders_open, uint64_t ts_event) → bool<a href="#update_ordersself-account-account-instrument-instrument-list-orders_open-uint64_t-ts_event--bool" class="hash-link" aria-label="Direct link to update_orders(self, Account account, Instrument instrument, list orders_open, uint64_t ts_event) → bool" title="Direct link to update_orders(self, Account account, Instrument instrument, list orders_open, uint64_t ts_event) → bool">​</a></h4>
<p>Update the account states based on the given orders.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>account</strong> (<a href="#posei_trader.accounting.accounts.margin.MarginAccount"><em>MarginAccount</em></a>) – The account to update.</li>
<li><strong>instrument</strong> (<a href="../model/instruments/index.htm#posei_trader.model.instruments.Instrument"><em>Instrument</em></a>) – The instrument for the update.</li>
<li><strong>orders_open</strong> (<em>list</em> <em>[</em><a href="../model/orders/index.htm#posei_trader.model.orders.Order"><em>Order</em></a> <em>]</em>) – The open orders for the update.</li>
<li><strong>ts_event</strong> (<em>uint64_t</em>) – UNIX timestamp (nanoseconds) when the account event occurred.</li>
</ul>
</li>
<li><strong>Returns:</strong>
The result of the account operation.</li>
<li><strong>Return type:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_positionsself-marginaccount-account-instrument-instrument-list-positions_open-uint64_t-ts_event--bool">update_positions(self, MarginAccount account, Instrument instrument, list positions_open, uint64_t ts_event) → bool<a href="#update_positionsself-marginaccount-account-instrument-instrument-list-positions_open-uint64_t-ts_event--bool" class="hash-link" aria-label="Direct link to update_positions(self, MarginAccount account, Instrument instrument, list positions_open, uint64_t ts_event) → bool" title="Direct link to update_positions(self, MarginAccount account, Instrument instrument, list positions_open, uint64_t ts_event) → bool">​</a></h4>
<p>Update the maintenance (position) margin.</p>
<p>Will return <code>None</code> if operation fails.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>account</strong> (<em>Account</em>) – The account to update.</li>
<li><strong>instrument</strong> (<a href="../model/instruments/index.htm#posei_trader.model.instruments.Instrument"><em>Instrument</em></a>) – The instrument for the update.</li>
<li><strong>positions_open</strong> (<em>list</em> <em>[</em><a href="../model/index.htm#posei_trader.model.Position"><em>Position</em></a> <em>]</em>) – The open positions for the update.</li>
<li><strong>ts_event</strong> (<em>uint64_t</em>) – UNIX timestamp (nanoseconds) when the account event occurred.</li>
</ul>
</li>
<li><strong>Returns:</strong>
The result of the account operation.</li>
<li><strong>Return type:</strong>
bool</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="../index.htm"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Python API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="../adapters/index.htm"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Adapters</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#class-cashaccount" class="table-of-contents__link toc-highlight"><em>class</em> CashAccount</a></li><li><a href="#class-marginaccount" class="table-of-contents__link toc-highlight"><em>class</em> MarginAccount</a></li><li><a href="#class-rolloverinterestcalculator" class="table-of-contents__link toc-highlight"><em>class</em> RolloverInterestCalculator</a></li><li><a href="#class-accountfactory" class="table-of-contents__link toc-highlight"><em>class</em> AccountFactory</a></li><li><a href="#class-accountsmanager" class="table-of-contents__link toc-highlight"><em>class</em> AccountsManager</a></li></ul></div></div></div><div class="footer-wrapper MuiBox-root css-0"><div class="social-footer-box MuiBox-root css-0"><style data-emotion="css 17rjyz3">.css-17rjyz3{-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);padding:12px;margin-right:10px;}.css-17rjyz3:hover{text-decoration-color:inherit;}</style><style data-emotion="css jl1bw5">.css-jl1bw5{margin:0;font:inherit;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);padding:12px;margin-right:10px;}.css-jl1bw5:hover{text-decoration-color:inherit;}</style><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways github-footer css-jl1bw5" href="https://github.com/poseisysstems" target="_blank"></a><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways discord-footer css-jl1bw5" href="" target="_blank"></a><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways linkedin-footer css-jl1bw5" href="https://www.linkedin.com/company/poseitrader/" target="_blank"></a><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways x-footer css-jl1bw5" href="https://twitter.com/PoseiTrader" target="_blank"></a></div><div class="footer-copyright">© 2025 Posei Systems Pty Ltd. All rights reserved.</div></div></div></div></main></div></div></div></div>
</body>
</html>