<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-nightly docs-doc-page docs-doc-id-api_reference/portfolio" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Portfolio | PoseiTrader Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="docs/latestimg/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="docs/latestimg/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="docs/latestnightly/api_reference/portfolio"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="Open-source trading platform, Algorithmic trading software, Event-driven backtesting, Live trading with no code changes, Trade any asset class, Low-latency trading execution, Python API for trading strategies, Custom market data integration, Futures and options trading, Crypto spot and derivatives trading, Equities trading simulation, FX spot trading, Sports betting markets trading, Fast backtesting strategies, Advanced trading orders, Rust-based trading platform, High-performance trading system, Nanosecond resolution market simulation, Trading across multiple venues, Trading platform for hedge funds, Seamless data integration, Customizable trading strategies, AI and ML trading strategies, Posei trading platform, Multi-venue trading, Unlimited backtesting strategies, Fast trading execution solutions, Realistic market simulations, Seamless trading API integration, PoseiTrader Documentation, Docs, PoseiTrader Docs"><meta data-rh="true" name="title" content="PoseiTrader Documentation"><meta data-rh="true" name="og:title" content="PoseiTrader Documentation"><meta data-rh="true" name="og:description" content="PoseiTrader is a high-performance platform for automating trading strategies, built on the powerful Posei framework for backtesting and real-time trading."><meta data-rh="true" name="og:image" content="img/preview.png"><meta data-rh="true" name="og:url" content="/docs/latest"><meta data-rh="true" name="docusaurus_version" content="nightly"><meta data-rh="true" name="docusaurus_tag" content="docs-default-nightly"><meta data-rh="true" name="docsearch:version" content="nightly"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-nightly"><meta data-rh="true" property="og:title" content="Portfolio | PoseiTrader Documentation"><meta data-rh="true" name="description" content="The portfolio subpackage provides portfolio management functionality."><meta data-rh="true" property="og:description" content="The portfolio subpackage provides portfolio management functionality."><link data-rh="true" rel="icon" href="../../../img/shell.ico"><link data-rh="true" rel="canonical" href="index.htm"><link data-rh="true" rel="alternate" href="index.htm" hreflang="en"><link data-rh="true" rel="alternate" href="index.htm" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://CWRKEEL01M-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Python API","item":"docs/latestnightly/api_reference/"},{"@type":"ListItem","position":2,"name":"Portfolio","item":"docs/latestnightly/api_reference/portfolio"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="PoseiTrader Documentation" href="../../../opensearch.xml">
<script>!function(){var t=window.location.pathname;if(t.startsWith("/docs")&&!t.startsWith("/docs/latest")&&!t.startsWith("/docs/nightly")){var s=t.replace("/docs","/docs/latest");window.location.href=s}}()</script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TR4XK597XK"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TR4XK597XK",{anonymize_ip:!0})</script><link rel="stylesheet" href="../../../assets/css/styles.0f0f692e.css">
<script src="../../../assets/js/runtime~main.92b727d5.js" defer="defer"></script>
<script src="../../../assets/js/main.1cd42d85.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewbox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewbox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="../../../../index.htm" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="../../../img/nt-black-large.webp" alt="PoseiTrader Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="../../../img/nt-white-large.webp" alt="PoseiTrader Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Version</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="../../../latest/index.html">latest</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="../../index.htm">nightly</a></li></ul></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewbox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/poseisysstems" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link common-social" aria-label="GitHub repository"></a> <a href="https://twitter.com/PoseiTrader" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-x-link common-social" aria-label="X"></a><div class="toggleContainer_T22x colorModeToggle_DEke"><button class="clean-btn toggleButton_yw5v toggleButtonDisabled_BJd7" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><div class="switch_Ms1n"><span class="iconWrapper_FHql"><style data-emotion="css lp52so">.css-lp52so{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;color:black;font-size:14px;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium lightToggleIcon_SFTY css-lp52so" focusable="false" aria-hidden="true" viewbox="0 0 24 24" data-testid="LightModeIcon"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"></path></svg><style data-emotion="css 13m6tje">.css-13m6tje{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;color:white;font-size:14px;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium darkToggleIcon_ekgs css-13m6tje" focusable="false" aria-hidden="true" viewbox="0 0 24 24" data-testid="DarkModeIcon"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"></path></svg></span></div></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a href="../../../../index.htm" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_isFc"><img src="../../../img/nt-black-large.webp" alt="PoseiTrader Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="../../../img/nt-white-large.webp" alt="PoseiTrader Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b></b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../../index.htm">PoseiTrader Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../../getting_started/index.htm">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../../concepts/index.htm">Concepts</a><button aria-label="Expand sidebar category &#x27;Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../../tutorials/index.htm">Tutorials</a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../../integrations/index.htm">Integrations</a><button aria-label="Expand sidebar category &#x27;Integrations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="../index.htm">Python API</a><button aria-label="Collapse sidebar category &#x27;Python API&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../accounting/index.htm">Accounting</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="../adapters/index.htm">Adapters</a><button aria-label="Expand sidebar category &#x27;Adapters&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../analysis/index.htm">Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../backtest/index.htm">Backtest</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../cache/index.htm">Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../common/index.htm">Common</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../config/index.htm">Config</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../core/index.htm">Core</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../data/index.htm">Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../execution/index.htm">Execution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../indicators/index.htm">Indicators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../live/index.htm">Live</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="../model/index.htm">Model</a><button aria-label="Expand sidebar category &#x27;Model&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../persistence/index.htm">Persistence</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="index.htm">Portfolio</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../risk/index.htm">Risk</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../serialization/index.htm">Serialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../system/index.htm">System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="../trading/index.htm">Trading</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="../../../core-nightly/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Rust API<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../../developer_guide/index.htm">Developer Guide</a><button aria-label="Expand sidebar category &#x27;Developer Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="../index.htm"><span>Python API</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Portfolio</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: nightly</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Portfolio</h1></header>
<p>The portfolio subpackage provides portfolio management functionality.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="class-portfolio"><em>class</em> Portfolio<a href="#class-portfolio" class="hash-link" aria-label="Direct link to class-portfolio" title="Direct link to class-portfolio">​</a></h3>
<p>Bases: <a href="#posei_trader.portfolio.base.PortfolioFacade"><code>PortfolioFacade</code></a></p>
<p>Portfolio(MessageBus msgbus, CacheFacade cache, Clock clock, config: PortfolioConfig | None = None) -&gt; None</p>
<p>Provides a trading portfolio.</p>
<p>Currently there is a limitation of one account per <code>ExecutionClient</code>
instance.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>msgbus</strong> (<a href="../common/index.htm#posei_trader.common.component.MessageBus"><em>MessageBus</em></a>) – The message bus for the engine.</li>
<li><strong>cache</strong> (<a href="../cache/index.htm#posei_trader.cache.base.CacheFacade"><em>CacheFacade</em></a>) – The read-only cache for the portfolio.</li>
<li><strong>clock</strong> (<a href="../common/index.htm#posei_trader.common.component.Clock"><em>Clock</em></a>) – The clock for the portfolio.</li>
<li><strong>config</strong> (<em>PortfolioConfig</em>) – The configuration for the instance.</li>
</ul>
</li>
<li><strong>Raises:</strong>
<strong>TypeError</strong> – If config is not of type PortfolioConfig.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="accountself-venue-venue--account">account(self, Venue venue) → Account<a href="#accountself-venue-venue--account" class="hash-link" aria-label="Direct link to account(self, Venue venue) → Account" title="Direct link to account(self, Venue venue) → Account">​</a></h4>
<p>Return the account for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the account.</li>
<li><strong>Return type:</strong>
Account or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balances_lockedself-venue-venue--dict">balances_locked(self, Venue venue) → dict<a href="#balances_lockedself-venue-venue--dict" class="hash-link" aria-label="Direct link to balances_locked(self, Venue venue) → dict" title="Direct link to balances_locked(self, Venue venue) → dict">​</a></h4>
<p>Return the balances locked for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the margin.</li>
<li><strong>Return type:</strong>
dict[Currency, Money] or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="disposeself--none">dispose(self) → None<a href="#disposeself--none" class="hash-link" aria-label="Direct link to dispose(self) → None" title="Direct link to dispose(self) → None">​</a></h4>
<p>Dispose of the portfolio.</p>
<p>All stateful fields are reset to their initial value.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="initialize_ordersself--void">initialize_orders(self) → void<a href="#initialize_ordersself--void" class="hash-link" aria-label="Direct link to initialize_orders(self) → void" title="Direct link to initialize_orders(self) → void">​</a></h4>
<p>Initialize the portfolios orders.</p>
<p>Performs all account calculations for the current orders state.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="initialize_positionsself--void">initialize_positions(self) → void<a href="#initialize_positionsself--void" class="hash-link" aria-label="Direct link to initialize_positions(self) → void" title="Direct link to initialize_positions(self) → void">​</a></h4>
<p>Initialize the portfolios positions.</p>
<p>Performs all account calculations for the current position state.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_completely_flatself--bool">is_completely_flat(self) → bool<a href="#is_completely_flatself--bool" class="hash-link" aria-label="Direct link to is_completely_flat(self) → bool" title="Direct link to is_completely_flat(self) → bool">​</a></h4>
<p>Return a value indicating whether the portfolio is completely flat.</p>
<ul>
<li><strong>Returns:</strong>
True if net flat across all instruments, else False.</li>
<li><strong>Return type:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_flatself-instrumentid-instrument_id--bool">is_flat(self, InstrumentId instrument_id) → bool<a href="#is_flatself-instrumentid-instrument_id--bool" class="hash-link" aria-label="Direct link to is_flat(self, InstrumentId instrument_id) → bool" title="Direct link to is_flat(self, InstrumentId instrument_id) → bool">​</a></h4>
<p>Return a value indicating whether the portfolio is flat for the given
instrument ID.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument query filter.</li>
<li><strong>Returns:</strong>
True if net flat, else False.</li>
<li><strong>Return type:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_net_longself-instrumentid-instrument_id--bool">is_net_long(self, InstrumentId instrument_id) → bool<a href="#is_net_longself-instrumentid-instrument_id--bool" class="hash-link" aria-label="Direct link to is_net_long(self, InstrumentId instrument_id) → bool" title="Direct link to is_net_long(self, InstrumentId instrument_id) → bool">​</a></h4>
<p>Return a value indicating whether the portfolio is net long the given
instrument ID.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the query.</li>
<li><strong>Returns:</strong>
True if net long, else False.</li>
<li><strong>Return type:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_net_shortself-instrumentid-instrument_id--bool">is_net_short(self, InstrumentId instrument_id) → bool<a href="#is_net_shortself-instrumentid-instrument_id--bool" class="hash-link" aria-label="Direct link to is_net_short(self, InstrumentId instrument_id) → bool" title="Direct link to is_net_short(self, InstrumentId instrument_id) → bool">​</a></h4>
<p>Return a value indicating whether the portfolio is net short the given
instrument ID.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the query.</li>
<li><strong>Returns:</strong>
True if net short, else False.</li>
<li><strong>Return type:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="margins_initself-venue-venue--dict">margins_init(self, Venue venue) → dict<a href="#margins_initself-venue-venue--dict" class="hash-link" aria-label="Direct link to margins_init(self, Venue venue) → dict" title="Direct link to margins_init(self, Venue venue) → dict">​</a></h4>
<p>Return the initial (order) margins for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the margin.</li>
<li><strong>Return type:</strong>
dict[Currency, Money] or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="margins_maintself-venue-venue--dict">margins_maint(self, Venue venue) → dict<a href="#margins_maintself-venue-venue--dict" class="hash-link" aria-label="Direct link to margins_maint(self, Venue venue) → dict" title="Direct link to margins_maint(self, Venue venue) → dict">​</a></h4>
<p>Return the maintenance (position) margins for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the margin.</li>
<li><strong>Return type:</strong>
dict[Currency, Money] or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="net_exposureself-instrumentid-instrument_id-price-pricenone--money">net_exposure(self, InstrumentId instrument_id, Price price=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#net_exposureself-instrumentid-instrument_id-price-pricenone--money" class="hash-link" aria-label="Direct link to net_exposureself-instrumentid-instrument_id-price-pricenone--money" title="Direct link to net_exposureself-instrumentid-instrument_id-price-pricenone--money">​</a></h4>
<p>Return the net exposure for the given instrument (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the calculation.</li>
<li><strong>price</strong> (<a href="../model/index.htm#posei_trader.model.Price"><em>Price</em></a> <em>,</em> <em>optional</em>) – The reference price for the calculation. This could be the last, mid, bid, ask,
a mark-to-market price, or any other suitably representative value.</li>
</ul>
</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="net_exposuresself-venue-venue--dict">net_exposures(self, Venue venue) → dict<a href="#net_exposuresself-venue-venue--dict" class="hash-link" aria-label="Direct link to net_exposures(self, Venue venue) → dict" title="Direct link to net_exposures(self, Venue venue) → dict">​</a></h4>
<p>Return the net exposures for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the market value.</li>
<li><strong>Return type:</strong>
dict[Currency, Money] or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="net_positionself-instrumentid-instrument_id">net_position(self, InstrumentId instrument_id)<a href="#net_positionself-instrumentid-instrument_id" class="hash-link" aria-label="Direct link to net_position(self, InstrumentId instrument_id)" title="Direct link to net_position(self, InstrumentId instrument_id)">​</a></h4>
<p>Return the total net position for the given instrument ID.
If no positions for instrument_id then will return Decimal(‘0’).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the query.</li>
<li><strong>Return type:</strong>
Decimal</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="on_order_eventself-orderevent-event--void">on_order_event(self, OrderEvent event) → void<a href="#on_order_eventself-orderevent-event--void" class="hash-link" aria-label="Direct link to on_order_event(self, OrderEvent event) → void" title="Direct link to on_order_event(self, OrderEvent event) → void">​</a></h4>
<p>Actions to be performed on receiving an order event.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.OrderEvent"><em>OrderEvent</em></a>) – The event received.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="on_position_eventself-positionevent-event--void">on_position_event(self, PositionEvent event) → void<a href="#on_position_eventself-positionevent-event--void" class="hash-link" aria-label="Direct link to on_position_event(self, PositionEvent event) → void" title="Direct link to on_position_event(self, PositionEvent event) → void">​</a></h4>
<p>Actions to be performed on receiving a position event.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.PositionEvent"><em>PositionEvent</em></a>) – The event received.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="realized_pnlself-instrumentid-instrument_id--money">realized_pnl(self, InstrumentId instrument_id) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#realized_pnlself-instrumentid-instrument_id--money" class="hash-link" aria-label="Direct link to realized_pnlself-instrumentid-instrument_id--money" title="Direct link to realized_pnlself-instrumentid-instrument_id--money">​</a></h4>
<p>Return the realized PnL for the given instrument ID (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the realized PnL.</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="realized_pnlsself-venue-venue--dict">realized_pnls(self, Venue venue) → dict<a href="#realized_pnlsself-venue-venue--dict" class="hash-link" aria-label="Direct link to realized_pnls(self, Venue venue) → dict" title="Direct link to realized_pnls(self, Venue venue) → dict">​</a></h4>
<p>Return the realized PnLs for the given venue (if found).</p>
<p>If no positions exist for the venue or if any lookups fail internally,
an empty dictionary is returned.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the realized PnLs.</li>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resetself--none">reset(self) → None<a href="#resetself--none" class="hash-link" aria-label="Direct link to reset(self) → None" title="Direct link to reset(self) → None">​</a></h4>
<p>Reset the portfolio.</p>
<p>All stateful fields are reset to their initial value.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set_specific_venueself-venue-venue--void">set_specific_venue(self, Venue venue) → void<a href="#set_specific_venueself-venue-venue--void" class="hash-link" aria-label="Direct link to set_specific_venue(self, Venue venue) → void" title="Direct link to set_specific_venue(self, Venue venue) → void">​</a></h4>
<p>Set a specific venue for the portfolio.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The specific venue to set.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set_use_mark_pricesself-bool-value--void">set_use_mark_prices(self, bool value) → void<a href="#set_use_mark_pricesself-bool-value--void" class="hash-link" aria-label="Direct link to set_use_mark_prices(self, bool value) → void" title="Direct link to set_use_mark_prices(self, bool value) → void">​</a></h4>
<p>Set the use_mark_prices setting with the given value.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>value</strong> (<em>bool</em>) – The value to set.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set_use_mark_xratesself-bool-value--void">set_use_mark_xrates(self, bool value) → void<a href="#set_use_mark_xratesself-bool-value--void" class="hash-link" aria-label="Direct link to set_use_mark_xrates(self, bool value) → void" title="Direct link to set_use_mark_xrates(self, bool value) → void">​</a></h4>
<p>Set the use_mark_xrates setting with the given value.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>value</strong> (<em>bool</em>) – The value to set.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="total_pnlself-instrumentid-instrument_id-price-pricenone--money">total_pnl(self, InstrumentId instrument_id, Price price=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#total_pnlself-instrumentid-instrument_id-price-pricenone--money" class="hash-link" aria-label="Direct link to total_pnlself-instrumentid-instrument_id-price-pricenone--money" title="Direct link to total_pnlself-instrumentid-instrument_id-price-pricenone--money">​</a></h4>
<p>Return the total PnL for the given instrument ID (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the total PnL.</li>
<li><strong>price</strong> (<a href="../model/index.htm#posei_trader.model.Price"><em>Price</em></a> <em>,</em> <em>optional</em>) – The reference price for the calculation. This could be the last, mid, bid, ask,
a mark-to-market price, or any other suitably representative value.</li>
</ul>
</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="total_pnlsself-venue-venue--dict">total_pnls(self, Venue venue) → dict<a href="#total_pnlsself-venue-venue--dict" class="hash-link" aria-label="Direct link to total_pnls(self, Venue venue) → dict" title="Direct link to total_pnls(self, Venue venue) → dict">​</a></h4>
<p>Return the total PnLs for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the total PnLs.</li>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money">unrealized_pnl(self, InstrumentId instrument_id, Price price=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money" class="hash-link" aria-label="Direct link to unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money" title="Direct link to unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money">​</a></h4>
<p>Return the unrealized PnL for the given instrument ID (if found).</p>
<ul>
<li>If price is provided, a fresh calculation is performed without using or
updating the cache.</li>
<li>If price is omitted, the method returns the cached PnL if available, or
computes and caches it if not.</li>
</ul>
<p>Returns None if the calculation fails (e.g., the account or instrument cannot
be found), or zero-valued Money if no positions are open. Otherwise, it returns
a Money object (usually in the account’s base currency or the instrument’s
settlement currency).</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the unrealized PnL.</li>
<li><strong>price</strong> (<a href="../model/index.htm#posei_trader.model.Price"><em>Price</em></a> <em>,</em> <em>optional</em>) – The reference price for the calculation. This could be the last, mid, bid, ask,
a mark-to-market price, or any other suitably representative value.</li>
</ul>
</li>
<li><strong>Returns:</strong>
The unrealized PnL or None if the calculation cannot be performed.</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unrealized_pnlsself-venue-venue--dict">unrealized_pnls(self, Venue venue) → dict<a href="#unrealized_pnlsself-venue-venue--dict" class="hash-link" aria-label="Direct link to unrealized_pnls(self, Venue venue) → dict" title="Direct link to unrealized_pnls(self, Venue venue) → dict">​</a></h4>
<p>Return the unrealized PnLs for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the unrealized PnLs.</li>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_accountself-accountstate-event--void">update_account(self, AccountState event) → void<a href="#update_accountself-accountstate-event--void" class="hash-link" aria-label="Direct link to update_account(self, AccountState event) → void" title="Direct link to update_account(self, AccountState event) → void">​</a></h4>
<p>Apply the given account state.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.AccountState"><em>AccountState</em></a>) – The account state to apply.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_barself-bar-bar--void">update_bar(self, Bar bar) → void<a href="#update_barself-bar-bar--void" class="hash-link" aria-label="Direct link to update_bar(self, Bar bar) → void" title="Direct link to update_bar(self, Bar bar) → void">​</a></h4>
<p>Update the portfolio with the given bar.</p>
<p>Clears the cached unrealized PnL for the associated instrument, and
performs any initialization calculations which may have been pending
an update.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>bar</strong> (<a href="../model/data/index.htm#posei_trader.model.data.Bar"><em>Bar</em></a>) – The bar to update with.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_mark_priceself-mark_price--void">update_mark_price(self, mark_price) → void<a href="#update_mark_priceself-mark_price--void" class="hash-link" aria-label="Direct link to update_mark_price(self, mark_price) → void" title="Direct link to update_mark_price(self, mark_price) → void">​</a></h4>
<p>TBD</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_orderself-orderevent-event--void">update_order(self, OrderEvent event) → void<a href="#update_orderself-orderevent-event--void" class="hash-link" aria-label="Direct link to update_order(self, OrderEvent event) → void" title="Direct link to update_order(self, OrderEvent event) → void">​</a></h4>
<p>Update the portfolio with the given order.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.OrderEvent"><em>OrderEvent</em></a>) – The event to update with.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_positionself-positionevent-event--void">update_position(self, PositionEvent event) → void<a href="#update_positionself-positionevent-event--void" class="hash-link" aria-label="Direct link to update_position(self, PositionEvent event) → void" title="Direct link to update_position(self, PositionEvent event) → void">​</a></h4>
<p>Update the portfolio with the given position event.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.PositionEvent"><em>PositionEvent</em></a>) – The event to update with.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_quote_tickself-quotetick-tick--void">update_quote_tick(self, QuoteTick tick) → void<a href="#update_quote_tickself-quotetick-tick--void" class="hash-link" aria-label="Direct link to update_quote_tick(self, QuoteTick tick) → void" title="Direct link to update_quote_tick(self, QuoteTick tick) → void">​</a></h4>
<p>Update the portfolio with the given quote tick.</p>
<p>Clears the cached unrealized PnL for the associated instrument, and
performs any initialization calculations which may have been pending
an update.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>quote_tick</strong> (<a href="../model/data/index.htm#posei_trader.model.data.QuoteTick"><em>QuoteTick</em></a>) – The quote tick to update with.</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="class-portfoliofacade"><em>class</em> PortfolioFacade<a href="#class-portfoliofacade" class="hash-link" aria-label="Direct link to class-portfoliofacade" title="Direct link to class-portfoliofacade">​</a></h3>
<p>Bases: <code>object</code></p>
<p>Provides a read-only facade for a Portfolio.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="accountself-venue-venue--account-1">account(self, Venue venue) → Account<a href="#accountself-venue-venue--account-1" class="hash-link" aria-label="Direct link to account(self, Venue venue) → Account" title="Direct link to account(self, Venue venue) → Account">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="analyzer">analyzer<a href="#analyzer" class="hash-link" aria-label="Direct link to analyzer" title="Direct link to analyzer">​</a></h4>
<p>The portfolios analyzer.</p>
<ul>
<li><strong>Returns:</strong>
PortfolioAnalyzer</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balances_lockedself-venue-venue--dict-1">balances_locked(self, Venue venue) → dict<a href="#balances_lockedself-venue-venue--dict-1" class="hash-link" aria-label="Direct link to balances_locked(self, Venue venue) → dict" title="Direct link to balances_locked(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="initialized">initialized<a href="#initialized" class="hash-link" aria-label="Direct link to initialized" title="Direct link to initialized">​</a></h4>
<p>If the portfolio is initialized.</p>
<ul>
<li><strong>Returns:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_completely_flatself--bool-1">is_completely_flat(self) → bool<a href="#is_completely_flatself--bool-1" class="hash-link" aria-label="Direct link to is_completely_flat(self) → bool" title="Direct link to is_completely_flat(self) → bool">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_flatself-instrumentid-instrument_id--bool-1">is_flat(self, InstrumentId instrument_id) → bool<a href="#is_flatself-instrumentid-instrument_id--bool-1" class="hash-link" aria-label="Direct link to is_flat(self, InstrumentId instrument_id) → bool" title="Direct link to is_flat(self, InstrumentId instrument_id) → bool">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_net_longself-instrumentid-instrument_id--bool-1">is_net_long(self, InstrumentId instrument_id) → bool<a href="#is_net_longself-instrumentid-instrument_id--bool-1" class="hash-link" aria-label="Direct link to is_net_long(self, InstrumentId instrument_id) → bool" title="Direct link to is_net_long(self, InstrumentId instrument_id) → bool">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_net_shortself-instrumentid-instrument_id--bool-1">is_net_short(self, InstrumentId instrument_id) → bool<a href="#is_net_shortself-instrumentid-instrument_id--bool-1" class="hash-link" aria-label="Direct link to is_net_short(self, InstrumentId instrument_id) → bool" title="Direct link to is_net_short(self, InstrumentId instrument_id) → bool">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="margins_initself-venue-venue--dict-1">margins_init(self, Venue venue) → dict<a href="#margins_initself-venue-venue--dict-1" class="hash-link" aria-label="Direct link to margins_init(self, Venue venue) → dict" title="Direct link to margins_init(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="margins_maintself-venue-venue--dict-1">margins_maint(self, Venue venue) → dict<a href="#margins_maintself-venue-venue--dict-1" class="hash-link" aria-label="Direct link to margins_maint(self, Venue venue) → dict" title="Direct link to margins_maint(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="net_exposureself-instrumentid-instrument_id-price-pricenone--money-1">net_exposure(self, InstrumentId instrument_id, Price price=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#net_exposureself-instrumentid-instrument_id-price-pricenone--money-1" class="hash-link" aria-label="Direct link to net_exposureself-instrumentid-instrument_id-price-pricenone--money-1" title="Direct link to net_exposureself-instrumentid-instrument_id-price-pricenone--money-1">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="net_exposuresself-venue-venue--dict-1">net_exposures(self, Venue venue) → dict<a href="#net_exposuresself-venue-venue--dict-1" class="hash-link" aria-label="Direct link to net_exposures(self, Venue venue) → dict" title="Direct link to net_exposures(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="net_positionself-instrumentid-instrument_id-1">net_position(self, InstrumentId instrument_id)<a href="#net_positionself-instrumentid-instrument_id-1" class="hash-link" aria-label="Direct link to net_position(self, InstrumentId instrument_id)" title="Direct link to net_position(self, InstrumentId instrument_id)">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="realized_pnlself-instrumentid-instrument_id--money-1">realized_pnl(self, InstrumentId instrument_id) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#realized_pnlself-instrumentid-instrument_id--money-1" class="hash-link" aria-label="Direct link to realized_pnlself-instrumentid-instrument_id--money-1" title="Direct link to realized_pnlself-instrumentid-instrument_id--money-1">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="realized_pnlsself-venue-venue--dict-1">realized_pnls(self, Venue venue) → dict<a href="#realized_pnlsself-venue-venue--dict-1" class="hash-link" aria-label="Direct link to realized_pnls(self, Venue venue) → dict" title="Direct link to realized_pnls(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="total_pnlself-instrumentid-instrument_id-price-pricenone--money-1">total_pnl(self, InstrumentId instrument_id, Price price=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#total_pnlself-instrumentid-instrument_id-price-pricenone--money-1" class="hash-link" aria-label="Direct link to total_pnlself-instrumentid-instrument_id-price-pricenone--money-1" title="Direct link to total_pnlself-instrumentid-instrument_id-price-pricenone--money-1">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="total_pnlsself-venue-venue--dict-1">total_pnls(self, Venue venue) → dict<a href="#total_pnlsself-venue-venue--dict-1" class="hash-link" aria-label="Direct link to total_pnls(self, Venue venue) → dict" title="Direct link to total_pnls(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money-1">unrealized_pnl(self, InstrumentId instrument_id, Price price=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money-1" class="hash-link" aria-label="Direct link to unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money-1" title="Direct link to unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money-1">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unrealized_pnlsself-venue-venue--dict-1">unrealized_pnls(self, Venue venue) → dict<a href="#unrealized_pnlsself-venue-venue--dict-1" class="hash-link" aria-label="Direct link to unrealized_pnls(self, Venue venue) → dict" title="Direct link to unrealized_pnls(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<p><a id="module-posei_trader.portfolio.portfolio"></a></p>
<p>The Portfolio facilitates the management of trading operations.</p>
<p>The intended use case is for a single <code>Portfolio</code> instance per running system,
a fleet of trading strategies will organize around a portfolio with the help
of the Trader` class.</p>
<p>The portfolio can satisfy queries for account information, margin balances,
total risk exposures and total net positions.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="class-portfolio-1"><em>class</em> Portfolio<a href="#class-portfolio-1" class="hash-link" aria-label="Direct link to class-portfolio-1" title="Direct link to class-portfolio-1">​</a></h3>
<p>Bases: <a href="#posei_trader.portfolio.base.PortfolioFacade"><code>PortfolioFacade</code></a></p>
<p>Portfolio(MessageBus msgbus, CacheFacade cache, Clock clock, config: PortfolioConfig | None = None) -&gt; None</p>
<p>Provides a trading portfolio.</p>
<p>Currently there is a limitation of one account per <code>ExecutionClient</code>
instance.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>msgbus</strong> (<a href="../common/index.htm#posei_trader.common.component.MessageBus"><em>MessageBus</em></a>) – The message bus for the engine.</li>
<li><strong>cache</strong> (<a href="../cache/index.htm#posei_trader.cache.base.CacheFacade"><em>CacheFacade</em></a>) – The read-only cache for the portfolio.</li>
<li><strong>clock</strong> (<a href="../common/index.htm#posei_trader.common.component.Clock"><em>Clock</em></a>) – The clock for the portfolio.</li>
<li><strong>config</strong> (<em>PortfolioConfig</em>) – The configuration for the instance.</li>
</ul>
</li>
<li><strong>Raises:</strong>
<strong>TypeError</strong> – If config is not of type PortfolioConfig.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="accountself-venue-venue--account-2">account(self, Venue venue) → Account<a href="#accountself-venue-venue--account-2" class="hash-link" aria-label="Direct link to account(self, Venue venue) → Account" title="Direct link to account(self, Venue venue) → Account">​</a></h4>
<p>Return the account for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the account.</li>
<li><strong>Return type:</strong>
Account or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="analyzer-1">analyzer<a href="#analyzer-1" class="hash-link" aria-label="Direct link to analyzer" title="Direct link to analyzer">​</a></h4>
<p>The portfolios analyzer.</p>
<ul>
<li><strong>Returns:</strong>
PortfolioAnalyzer</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balances_lockedself-venue-venue--dict-2">balances_locked(self, Venue venue) → dict<a href="#balances_lockedself-venue-venue--dict-2" class="hash-link" aria-label="Direct link to balances_locked(self, Venue venue) → dict" title="Direct link to balances_locked(self, Venue venue) → dict">​</a></h4>
<p>Return the balances locked for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the margin.</li>
<li><strong>Return type:</strong>
dict[Currency, Money] or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="disposeself--none-1">dispose(self) → None<a href="#disposeself--none-1" class="hash-link" aria-label="Direct link to dispose(self) → None" title="Direct link to dispose(self) → None">​</a></h4>
<p>Dispose of the portfolio.</p>
<p>All stateful fields are reset to their initial value.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="initialize_ordersself--void-1">initialize_orders(self) → void<a href="#initialize_ordersself--void-1" class="hash-link" aria-label="Direct link to initialize_orders(self) → void" title="Direct link to initialize_orders(self) → void">​</a></h4>
<p>Initialize the portfolios orders.</p>
<p>Performs all account calculations for the current orders state.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="initialize_positionsself--void-1">initialize_positions(self) → void<a href="#initialize_positionsself--void-1" class="hash-link" aria-label="Direct link to initialize_positions(self) → void" title="Direct link to initialize_positions(self) → void">​</a></h4>
<p>Initialize the portfolios positions.</p>
<p>Performs all account calculations for the current position state.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="initialized-1">initialized<a href="#initialized-1" class="hash-link" aria-label="Direct link to initialized" title="Direct link to initialized">​</a></h4>
<p>If the portfolio is initialized.</p>
<ul>
<li><strong>Returns:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_completely_flatself--bool-2">is_completely_flat(self) → bool<a href="#is_completely_flatself--bool-2" class="hash-link" aria-label="Direct link to is_completely_flat(self) → bool" title="Direct link to is_completely_flat(self) → bool">​</a></h4>
<p>Return a value indicating whether the portfolio is completely flat.</p>
<ul>
<li><strong>Returns:</strong>
True if net flat across all instruments, else False.</li>
<li><strong>Return type:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_flatself-instrumentid-instrument_id--bool-2">is_flat(self, InstrumentId instrument_id) → bool<a href="#is_flatself-instrumentid-instrument_id--bool-2" class="hash-link" aria-label="Direct link to is_flat(self, InstrumentId instrument_id) → bool" title="Direct link to is_flat(self, InstrumentId instrument_id) → bool">​</a></h4>
<p>Return a value indicating whether the portfolio is flat for the given
instrument ID.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument query filter.</li>
<li><strong>Returns:</strong>
True if net flat, else False.</li>
<li><strong>Return type:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_net_longself-instrumentid-instrument_id--bool-2">is_net_long(self, InstrumentId instrument_id) → bool<a href="#is_net_longself-instrumentid-instrument_id--bool-2" class="hash-link" aria-label="Direct link to is_net_long(self, InstrumentId instrument_id) → bool" title="Direct link to is_net_long(self, InstrumentId instrument_id) → bool">​</a></h4>
<p>Return a value indicating whether the portfolio is net long the given
instrument ID.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the query.</li>
<li><strong>Returns:</strong>
True if net long, else False.</li>
<li><strong>Return type:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_net_shortself-instrumentid-instrument_id--bool-2">is_net_short(self, InstrumentId instrument_id) → bool<a href="#is_net_shortself-instrumentid-instrument_id--bool-2" class="hash-link" aria-label="Direct link to is_net_short(self, InstrumentId instrument_id) → bool" title="Direct link to is_net_short(self, InstrumentId instrument_id) → bool">​</a></h4>
<p>Return a value indicating whether the portfolio is net short the given
instrument ID.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the query.</li>
<li><strong>Returns:</strong>
True if net short, else False.</li>
<li><strong>Return type:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="margins_initself-venue-venue--dict-2">margins_init(self, Venue venue) → dict<a href="#margins_initself-venue-venue--dict-2" class="hash-link" aria-label="Direct link to margins_init(self, Venue venue) → dict" title="Direct link to margins_init(self, Venue venue) → dict">​</a></h4>
<p>Return the initial (order) margins for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the margin.</li>
<li><strong>Return type:</strong>
dict[Currency, Money] or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="margins_maintself-venue-venue--dict-2">margins_maint(self, Venue venue) → dict<a href="#margins_maintself-venue-venue--dict-2" class="hash-link" aria-label="Direct link to margins_maint(self, Venue venue) → dict" title="Direct link to margins_maint(self, Venue venue) → dict">​</a></h4>
<p>Return the maintenance (position) margins for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the margin.</li>
<li><strong>Return type:</strong>
dict[Currency, Money] or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="net_exposureself-instrumentid-instrument_id-price-pricenone--money-2">net_exposure(self, InstrumentId instrument_id, Price price=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#net_exposureself-instrumentid-instrument_id-price-pricenone--money-2" class="hash-link" aria-label="Direct link to net_exposureself-instrumentid-instrument_id-price-pricenone--money-2" title="Direct link to net_exposureself-instrumentid-instrument_id-price-pricenone--money-2">​</a></h4>
<p>Return the net exposure for the given instrument (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the calculation.</li>
<li><strong>price</strong> (<a href="../model/index.htm#posei_trader.model.Price"><em>Price</em></a> <em>,</em> <em>optional</em>) – The reference price for the calculation. This could be the last, mid, bid, ask,
a mark-to-market price, or any other suitably representative value.</li>
</ul>
</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="net_exposuresself-venue-venue--dict-2">net_exposures(self, Venue venue) → dict<a href="#net_exposuresself-venue-venue--dict-2" class="hash-link" aria-label="Direct link to net_exposures(self, Venue venue) → dict" title="Direct link to net_exposures(self, Venue venue) → dict">​</a></h4>
<p>Return the net exposures for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the market value.</li>
<li><strong>Return type:</strong>
dict[Currency, Money] or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="net_positionself-instrumentid-instrument_id-2">net_position(self, InstrumentId instrument_id)<a href="#net_positionself-instrumentid-instrument_id-2" class="hash-link" aria-label="Direct link to net_position(self, InstrumentId instrument_id)" title="Direct link to net_position(self, InstrumentId instrument_id)">​</a></h4>
<p>Return the total net position for the given instrument ID.
If no positions for instrument_id then will return Decimal(‘0’).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the query.</li>
<li><strong>Return type:</strong>
Decimal</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="on_order_eventself-orderevent-event--void-1">on_order_event(self, OrderEvent event) → void<a href="#on_order_eventself-orderevent-event--void-1" class="hash-link" aria-label="Direct link to on_order_event(self, OrderEvent event) → void" title="Direct link to on_order_event(self, OrderEvent event) → void">​</a></h4>
<p>Actions to be performed on receiving an order event.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.OrderEvent"><em>OrderEvent</em></a>) – The event received.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="on_position_eventself-positionevent-event--void-1">on_position_event(self, PositionEvent event) → void<a href="#on_position_eventself-positionevent-event--void-1" class="hash-link" aria-label="Direct link to on_position_event(self, PositionEvent event) → void" title="Direct link to on_position_event(self, PositionEvent event) → void">​</a></h4>
<p>Actions to be performed on receiving a position event.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.PositionEvent"><em>PositionEvent</em></a>) – The event received.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="realized_pnlself-instrumentid-instrument_id--money-2">realized_pnl(self, InstrumentId instrument_id) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#realized_pnlself-instrumentid-instrument_id--money-2" class="hash-link" aria-label="Direct link to realized_pnlself-instrumentid-instrument_id--money-2" title="Direct link to realized_pnlself-instrumentid-instrument_id--money-2">​</a></h4>
<p>Return the realized PnL for the given instrument ID (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the realized PnL.</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="realized_pnlsself-venue-venue--dict-2">realized_pnls(self, Venue venue) → dict<a href="#realized_pnlsself-venue-venue--dict-2" class="hash-link" aria-label="Direct link to realized_pnls(self, Venue venue) → dict" title="Direct link to realized_pnls(self, Venue venue) → dict">​</a></h4>
<p>Return the realized PnLs for the given venue (if found).</p>
<p>If no positions exist for the venue or if any lookups fail internally,
an empty dictionary is returned.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the realized PnLs.</li>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resetself--none-1">reset(self) → None<a href="#resetself--none-1" class="hash-link" aria-label="Direct link to reset(self) → None" title="Direct link to reset(self) → None">​</a></h4>
<p>Reset the portfolio.</p>
<p>All stateful fields are reset to their initial value.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set_specific_venueself-venue-venue--void-1">set_specific_venue(self, Venue venue) → void<a href="#set_specific_venueself-venue-venue--void-1" class="hash-link" aria-label="Direct link to set_specific_venue(self, Venue venue) → void" title="Direct link to set_specific_venue(self, Venue venue) → void">​</a></h4>
<p>Set a specific venue for the portfolio.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The specific venue to set.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set_use_mark_pricesself-bool-value--void-1">set_use_mark_prices(self, bool value) → void<a href="#set_use_mark_pricesself-bool-value--void-1" class="hash-link" aria-label="Direct link to set_use_mark_prices(self, bool value) → void" title="Direct link to set_use_mark_prices(self, bool value) → void">​</a></h4>
<p>Set the use_mark_prices setting with the given value.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>value</strong> (<em>bool</em>) – The value to set.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="set_use_mark_xratesself-bool-value--void-1">set_use_mark_xrates(self, bool value) → void<a href="#set_use_mark_xratesself-bool-value--void-1" class="hash-link" aria-label="Direct link to set_use_mark_xrates(self, bool value) → void" title="Direct link to set_use_mark_xrates(self, bool value) → void">​</a></h4>
<p>Set the use_mark_xrates setting with the given value.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>value</strong> (<em>bool</em>) – The value to set.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="total_pnlself-instrumentid-instrument_id-price-pricenone--money-2">total_pnl(self, InstrumentId instrument_id, Price price=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#total_pnlself-instrumentid-instrument_id-price-pricenone--money-2" class="hash-link" aria-label="Direct link to total_pnlself-instrumentid-instrument_id-price-pricenone--money-2" title="Direct link to total_pnlself-instrumentid-instrument_id-price-pricenone--money-2">​</a></h4>
<p>Return the total PnL for the given instrument ID (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the total PnL.</li>
<li><strong>price</strong> (<a href="../model/index.htm#posei_trader.model.Price"><em>Price</em></a> <em>,</em> <em>optional</em>) – The reference price for the calculation. This could be the last, mid, bid, ask,
a mark-to-market price, or any other suitably representative value.</li>
</ul>
</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="total_pnlsself-venue-venue--dict-2">total_pnls(self, Venue venue) → dict<a href="#total_pnlsself-venue-venue--dict-2" class="hash-link" aria-label="Direct link to total_pnls(self, Venue venue) → dict" title="Direct link to total_pnls(self, Venue venue) → dict">​</a></h4>
<p>Return the total PnLs for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the total PnLs.</li>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money-2">unrealized_pnl(self, InstrumentId instrument_id, Price price=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money-2" class="hash-link" aria-label="Direct link to unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money-2" title="Direct link to unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money-2">​</a></h4>
<p>Return the unrealized PnL for the given instrument ID (if found).</p>
<ul>
<li>If price is provided, a fresh calculation is performed without using or
updating the cache.</li>
<li>If price is omitted, the method returns the cached PnL if available, or
computes and caches it if not.</li>
</ul>
<p>Returns None if the calculation fails (e.g., the account or instrument cannot
be found), or zero-valued Money if no positions are open. Otherwise, it returns
a Money object (usually in the account’s base currency or the instrument’s
settlement currency).</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><strong>instrument_id</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.InstrumentId"><em>InstrumentId</em></a>) – The instrument for the unrealized PnL.</li>
<li><strong>price</strong> (<a href="../model/index.htm#posei_trader.model.Price"><em>Price</em></a> <em>,</em> <em>optional</em>) – The reference price for the calculation. This could be the last, mid, bid, ask,
a mark-to-market price, or any other suitably representative value.</li>
</ul>
</li>
<li><strong>Returns:</strong>
The unrealized PnL or None if the calculation cannot be performed.</li>
<li><strong>Return type:</strong>
Money or <code>None</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unrealized_pnlsself-venue-venue--dict-2">unrealized_pnls(self, Venue venue) → dict<a href="#unrealized_pnlsself-venue-venue--dict-2" class="hash-link" aria-label="Direct link to unrealized_pnls(self, Venue venue) → dict" title="Direct link to unrealized_pnls(self, Venue venue) → dict">​</a></h4>
<p>Return the unrealized PnLs for the given venue (if found).</p>
<ul>
<li><strong>Parameters:</strong>
<strong>venue</strong> (<a href="../model/identifiers/index.htm#posei_trader.model.identifiers.Venue"><em>Venue</em></a>) – The venue for the unrealized PnLs.</li>
<li><strong>Return type:</strong>
dict[<a href="../model/index.htm#posei_trader.model.Currency">Currency</a>, <a href="../model/index.htm#posei_trader.model.Money">Money</a>]</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_accountself-accountstate-event--void-1">update_account(self, AccountState event) → void<a href="#update_accountself-accountstate-event--void-1" class="hash-link" aria-label="Direct link to update_account(self, AccountState event) → void" title="Direct link to update_account(self, AccountState event) → void">​</a></h4>
<p>Apply the given account state.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.AccountState"><em>AccountState</em></a>) – The account state to apply.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_barself-bar-bar--void-1">update_bar(self, Bar bar) → void<a href="#update_barself-bar-bar--void-1" class="hash-link" aria-label="Direct link to update_bar(self, Bar bar) → void" title="Direct link to update_bar(self, Bar bar) → void">​</a></h4>
<p>Update the portfolio with the given bar.</p>
<p>Clears the cached unrealized PnL for the associated instrument, and
performs any initialization calculations which may have been pending
an update.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>bar</strong> (<a href="../model/data/index.htm#posei_trader.model.data.Bar"><em>Bar</em></a>) – The bar to update with.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_mark_priceself-mark_price--void-1">update_mark_price(self, mark_price) → void<a href="#update_mark_priceself-mark_price--void-1" class="hash-link" aria-label="Direct link to update_mark_price(self, mark_price) → void" title="Direct link to update_mark_price(self, mark_price) → void">​</a></h4>
<p>TBD</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_orderself-orderevent-event--void-1">update_order(self, OrderEvent event) → void<a href="#update_orderself-orderevent-event--void-1" class="hash-link" aria-label="Direct link to update_order(self, OrderEvent event) → void" title="Direct link to update_order(self, OrderEvent event) → void">​</a></h4>
<p>Update the portfolio with the given order.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.OrderEvent"><em>OrderEvent</em></a>) – The event to update with.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_positionself-positionevent-event--void-1">update_position(self, PositionEvent event) → void<a href="#update_positionself-positionevent-event--void-1" class="hash-link" aria-label="Direct link to update_position(self, PositionEvent event) → void" title="Direct link to update_position(self, PositionEvent event) → void">​</a></h4>
<p>Update the portfolio with the given position event.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>event</strong> (<a href="../model/events/index.htm#posei_trader.model.events.PositionEvent"><em>PositionEvent</em></a>) – The event to update with.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="update_quote_tickself-quotetick-tick--void-1">update_quote_tick(self, QuoteTick tick) → void<a href="#update_quote_tickself-quotetick-tick--void-1" class="hash-link" aria-label="Direct link to update_quote_tick(self, QuoteTick tick) → void" title="Direct link to update_quote_tick(self, QuoteTick tick) → void">​</a></h4>
<p>Update the portfolio with the given quote tick.</p>
<p>Clears the cached unrealized PnL for the associated instrument, and
performs any initialization calculations which may have been pending
an update.</p>
<ul>
<li><strong>Parameters:</strong>
<strong>quote_tick</strong> (<a href="../model/data/index.htm#posei_trader.model.data.QuoteTick"><em>QuoteTick</em></a>) – The quote tick to update with.</li>
</ul>
<p><a id="module-posei_trader.portfolio.base"></a></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="class-portfoliofacade-1"><em>class</em> PortfolioFacade<a href="#class-portfoliofacade-1" class="hash-link" aria-label="Direct link to class-portfoliofacade-1" title="Direct link to class-portfoliofacade-1">​</a></h3>
<p>Bases: <code>object</code></p>
<p>Provides a read-only facade for a Portfolio.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="accountself-venue-venue--account-3">account(self, Venue venue) → Account<a href="#accountself-venue-venue--account-3" class="hash-link" aria-label="Direct link to account(self, Venue venue) → Account" title="Direct link to account(self, Venue venue) → Account">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="analyzer-2">analyzer<a href="#analyzer-2" class="hash-link" aria-label="Direct link to analyzer" title="Direct link to analyzer">​</a></h4>
<p>The portfolios analyzer.</p>
<ul>
<li><strong>Returns:</strong>
PortfolioAnalyzer</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="balances_lockedself-venue-venue--dict-3">balances_locked(self, Venue venue) → dict<a href="#balances_lockedself-venue-venue--dict-3" class="hash-link" aria-label="Direct link to balances_locked(self, Venue venue) → dict" title="Direct link to balances_locked(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="initialized-2">initialized<a href="#initialized-2" class="hash-link" aria-label="Direct link to initialized" title="Direct link to initialized">​</a></h4>
<p>If the portfolio is initialized.</p>
<ul>
<li><strong>Returns:</strong>
bool</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_completely_flatself--bool-3">is_completely_flat(self) → bool<a href="#is_completely_flatself--bool-3" class="hash-link" aria-label="Direct link to is_completely_flat(self) → bool" title="Direct link to is_completely_flat(self) → bool">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_flatself-instrumentid-instrument_id--bool-3">is_flat(self, InstrumentId instrument_id) → bool<a href="#is_flatself-instrumentid-instrument_id--bool-3" class="hash-link" aria-label="Direct link to is_flat(self, InstrumentId instrument_id) → bool" title="Direct link to is_flat(self, InstrumentId instrument_id) → bool">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_net_longself-instrumentid-instrument_id--bool-3">is_net_long(self, InstrumentId instrument_id) → bool<a href="#is_net_longself-instrumentid-instrument_id--bool-3" class="hash-link" aria-label="Direct link to is_net_long(self, InstrumentId instrument_id) → bool" title="Direct link to is_net_long(self, InstrumentId instrument_id) → bool">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="is_net_shortself-instrumentid-instrument_id--bool-3">is_net_short(self, InstrumentId instrument_id) → bool<a href="#is_net_shortself-instrumentid-instrument_id--bool-3" class="hash-link" aria-label="Direct link to is_net_short(self, InstrumentId instrument_id) → bool" title="Direct link to is_net_short(self, InstrumentId instrument_id) → bool">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="margins_initself-venue-venue--dict-3">margins_init(self, Venue venue) → dict<a href="#margins_initself-venue-venue--dict-3" class="hash-link" aria-label="Direct link to margins_init(self, Venue venue) → dict" title="Direct link to margins_init(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="margins_maintself-venue-venue--dict-3">margins_maint(self, Venue venue) → dict<a href="#margins_maintself-venue-venue--dict-3" class="hash-link" aria-label="Direct link to margins_maint(self, Venue venue) → dict" title="Direct link to margins_maint(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="net_exposureself-instrumentid-instrument_id-price-pricenone--money-3">net_exposure(self, InstrumentId instrument_id, Price price=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#net_exposureself-instrumentid-instrument_id-price-pricenone--money-3" class="hash-link" aria-label="Direct link to net_exposureself-instrumentid-instrument_id-price-pricenone--money-3" title="Direct link to net_exposureself-instrumentid-instrument_id-price-pricenone--money-3">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="net_exposuresself-venue-venue--dict-3">net_exposures(self, Venue venue) → dict<a href="#net_exposuresself-venue-venue--dict-3" class="hash-link" aria-label="Direct link to net_exposures(self, Venue venue) → dict" title="Direct link to net_exposures(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="net_positionself-instrumentid-instrument_id-3">net_position(self, InstrumentId instrument_id)<a href="#net_positionself-instrumentid-instrument_id-3" class="hash-link" aria-label="Direct link to net_position(self, InstrumentId instrument_id)" title="Direct link to net_position(self, InstrumentId instrument_id)">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="realized_pnlself-instrumentid-instrument_id--money-3">realized_pnl(self, InstrumentId instrument_id) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#realized_pnlself-instrumentid-instrument_id--money-3" class="hash-link" aria-label="Direct link to realized_pnlself-instrumentid-instrument_id--money-3" title="Direct link to realized_pnlself-instrumentid-instrument_id--money-3">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="realized_pnlsself-venue-venue--dict-3">realized_pnls(self, Venue venue) → dict<a href="#realized_pnlsself-venue-venue--dict-3" class="hash-link" aria-label="Direct link to realized_pnls(self, Venue venue) → dict" title="Direct link to realized_pnls(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="total_pnlself-instrumentid-instrument_id-price-pricenone--money-3">total_pnl(self, InstrumentId instrument_id, Price price=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#total_pnlself-instrumentid-instrument_id-price-pricenone--money-3" class="hash-link" aria-label="Direct link to total_pnlself-instrumentid-instrument_id-price-pricenone--money-3" title="Direct link to total_pnlself-instrumentid-instrument_id-price-pricenone--money-3">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="total_pnlsself-venue-venue--dict-3">total_pnls(self, Venue venue) → dict<a href="#total_pnlsself-venue-venue--dict-3" class="hash-link" aria-label="Direct link to total_pnls(self, Venue venue) → dict" title="Direct link to total_pnls(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money-3">unrealized_pnl(self, InstrumentId instrument_id, Price price=None) → <a href="../model/index.htm#posei_trader.model.Money">Money</a><a href="#unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money-3" class="hash-link" aria-label="Direct link to unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money-3" title="Direct link to unrealized_pnlself-instrumentid-instrument_id-price-pricenone--money-3">​</a></h4>
<p>Abstract method (implement in subclass).</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unrealized_pnlsself-venue-venue--dict-3">unrealized_pnls(self, Venue venue) → dict<a href="#unrealized_pnlsself-venue-venue--dict-3" class="hash-link" aria-label="Direct link to unrealized_pnls(self, Venue venue) → dict" title="Direct link to unrealized_pnls(self, Venue venue) → dict">​</a></h4>
<p>Abstract method (implement in subclass).</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="../persistence/index.htm"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Persistence</div></a><a class="pagination-nav__link pagination-nav__link--next" href="../risk/index.htm"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Risk</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#class-portfolio" class="table-of-contents__link toc-highlight"><em>class</em> Portfolio</a></li><li><a href="#class-portfoliofacade" class="table-of-contents__link toc-highlight"><em>class</em> PortfolioFacade</a></li><li><a href="#class-portfolio-1" class="table-of-contents__link toc-highlight"><em>class</em> Portfolio</a></li><li><a href="#class-portfoliofacade-1" class="table-of-contents__link toc-highlight"><em>class</em> PortfolioFacade</a></li></ul></div></div></div><div class="footer-wrapper MuiBox-root css-0"><div class="social-footer-box MuiBox-root css-0"><style data-emotion="css 17rjyz3">.css-17rjyz3{-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);padding:12px;margin-right:10px;}.css-17rjyz3:hover{text-decoration-color:inherit;}</style><style data-emotion="css jl1bw5">.css-jl1bw5{margin:0;font:inherit;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);padding:12px;margin-right:10px;}.css-jl1bw5:hover{text-decoration-color:inherit;}</style><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways github-footer css-jl1bw5" href="https://github.com/poseisysstems" target="_blank"></a><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways discord-footer css-jl1bw5" href="" target="_blank"></a><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways linkedin-footer css-jl1bw5" href="https://www.linkedin.com/company/poseitrader/" target="_blank"></a><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways x-footer css-jl1bw5" href="https://twitter.com/PoseiTrader" target="_blank"></a></div><div class="footer-copyright">© 2025 Posei Systems Pty Ltd. All rights reserved.</div></div></div></div></main></div></div></div></div>
</body>
</html>